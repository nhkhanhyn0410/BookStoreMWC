@* Views/Home/Contact.cshtml *@
@{
    ViewData["Title"] = "Liên hệ";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <!-- Breadcrumb -->
    @await Html.PartialAsync("_Breadcrumb", new List<(string, string)> {
    ("Trang chủ", Url.Action("Index", "Home")),
        ("Liên hệ", "")
        })

    <div class="row">
        <div class="col-12 text-center mb-5">
            <h1 class="display-4">Liên hệ với chúng tôi</h1>
            <p class="lead text-muted">
                Chúng tôi luôn sẵn sàng lắng nghe và hỗ trợ bạn
            </p>
        </div>
    </div>

    <div class="row">
        <!-- Contact Information -->
        <div class="col-lg-4 mb-5">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h4 class="card-title mb-4">
                        <i class="fas fa-info-circle text-primary"></i> Thông tin liên hệ
                    </h4>

                    <div class="contact-item mb-4">
                        <div class="d-flex align-items-start">
                            <div class="contact-icon me-3">
                                <i class="fas fa-map-marker-alt fa-lg text-primary"></i>
                            </div>
                            <div>
                                <h6>Địa chỉ</h6>
                                <p class="text-muted mb-0">
                                    123 Đường Nguyễn Huệ, Quận 1<br>
                                    TP. Hồ Chí Minh, Việt Nam
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="contact-item mb-4">
                        <div class="d-flex align-items-start">
                            <div class="contact-icon me-3">
                                <i class="fas fa-phone fa-lg text-primary"></i>
                            </div>
                            <div>
                                <h6>Điện thoại</h6>
                                <p class="text-muted mb-0">
                                    <a href="tel:+84123456789" class="text-decoration-none">
                                        (+84) 123 456 789
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="contact-item mb-4">
                        <div class="d-flex align-items-start">
                            <div class="contact-icon me-3">
                                <i class="fas fa-envelope fa-lg text-primary"></i>
                            </div>
                            <div>
                                <h6>Email</h6>
                                <p class="text-muted mb-0">
                                    <a href="mailto:info@bookstore.vn" class="text-decoration-none">
                                        info@bookstore.vn
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="contact-item mb-4">
                        <div class="d-flex align-items-start">
                            <div class="contact-icon me-3">
                                <i class="fas fa-clock fa-lg text-primary"></i>
                            </div>
                            <div>
                                <h6>Giờ làm việc</h6>
                                <p class="text-muted mb-1">Thứ 2 - Thứ 6: 8:00 - 18:00</p>
                                <p class="text-muted mb-1">Thứ 7: 8:00 - 17:00</p>
                                <p class="text-muted mb-0">Chủ nhật: 9:00 - 16:00</p>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <h6 class="mb-3">Theo dõi chúng tôi</h6>
                    <div class="social-links">
                        <a href="#" class="btn btn-outline-primary btn-sm me-2 mb-2">
                            <i class="fab fa-facebook-f"></i> Facebook
                        </a>
                        <a href="#" class="btn btn-outline-info btn-sm me-2 mb-2">
                            <i class="fab fa-twitter"></i> Twitter
                        </a>
                        <a href="#" class="btn btn-outline-danger btn-sm me-2 mb-2">
                            <i class="fab fa-instagram"></i> Instagram
                        </a>
                        <a href="#" class="btn btn-outline-success btn-sm mb-2">
                            <i class="fab fa-whatsapp"></i> WhatsApp
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Form -->
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h4 class="card-title mb-4">
                        <i class="fas fa-paper-plane text-primary"></i> Gửi tin nhắn
                    </h4>

                    <form id="contactForm" method="post" asp-action="Contact">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="form-label">Họ tên *</label>
                                    <input type="text" name="Name" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="form-label">Email *</label>
                                    <input type="email" name="Email" class="form-control" required>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="form-label">Số điện thoại</label>
                                    <input type="tel" name="Phone" class="form-control">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label class="form-label">Chủ đề</label>
                                    <select name="Subject" class="form-select">
                                        <option value="">Chọn chủ đề</option>
                                        <option value="general">Câu hỏi chung</option>
                                        <option value="order">Vấn đề đơn hàng</option>
                                        <option value="return">Đổi trả sản phẩm</option>
                                        <option value="suggestion">Góp ý, đề xuất</option>
                                        <option value="partnership">Hợp tác kinh doanh</option>
                                        <option value="other">Khác</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group mb-3">
                            <label class="form-label">Nội dung tin nhắn *</label>
                            <textarea name="Message" class="form-control" rows="6"
                                placeholder="Vui lòng mô tả chi tiết vấn đề hoặc câu hỏi của bạn..."
                                required></textarea>
                        </div>

                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="newsletter" name="Newsletter">
                            <label class="form-check-label" for="newsletter">
                                Tôi muốn nhận email thông báo về sản phẩm mới và ưu đãi đặc biệt
                            </label>
                        </div>

                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="privacy" required>
                            <label class="form-check-label" for="privacy">
                                Tôi đồng ý với
                                <a asp-action="Privacy" target="_blank">chính sách bảo mật</a>
                                của BookStore *
                            </label>
                        </div>

                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-paper-plane"></i> Gửi tin nhắn
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h3 class="text-center mb-4">Câu hỏi thường gặp</h3>
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq1">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapse1" aria-expanded="true">
                            Làm thế nào để đặt hàng trên website?
                        </button>
                    </h2>
                    <div id="collapse1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Bạn chỉ cần tìm sách mong muốn, thêm vào giỏ hàng, điền thông tin giao hàng và thanh toán.
                            Chúng tôi sẽ xử lý đơn hàng trong vòng 24 giờ.
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq2">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapse2">
                            Phí vận chuyển được tính như thế nào?
                        </button>
                    </h2>
                    <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Miễn phí vận chuyển cho đơn hàng từ 500,000đ. Với đơn hàng dưới 500,000đ,
                            phí vận chuyển là 30,000đ trong nội thành và 50,000đ ngoại thành.
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq3">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapse3">
                            Tôi có thể đổi trả sách không?
                        </button>
                    </h2>
                    <div id="collapse3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Có, bạn có thể đổi trả trong vòng 7 ngày kể từ ngày nhận hàng.
                            Sách phải còn nguyên vẹn và kèm theo hóa đơn mua hàng.
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq4">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapse4">
                            Các phương thức thanh toán nào được hỗ trợ?
                        </button>
                    </h2>
                    <div id="collapse4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Chúng tôi hỗ trợ thanh toán qua thẻ tín dụng/ghi nợ, ví điện tử (MoMo, ZaloPay),
                            chuyển khoản ngân hàng và thanh toán khi nhận hàng.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Map Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h3 class="text-center mb-4">Vị trí của chúng tôi</h3>
            <div class="map-container">
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.4326002651003!2d106.69868731531277!3d10.775431992321135!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f1c06f4e1dd%3A0x43900f1d4539408d!2sNguyen%20Hue%20Walking%20Street!5e0!3m2!1sen!2s!4v1636789234567!5m2!1sen!2s"
                    width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('contactForm').addEventListener('submit', function (e) {
        e.preventDefault();

        const formData = new FormData(this);
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;

        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang gửi...';

        fetch(this.action, {
            method: 'POST',
            body: formData
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire({
                        title: 'Gửi thành công!',
                        text: 'Cảm ơn bạn đã liên hệ. Chúng tôi sẽ phản hồi trong thời gian sớm nhất.',
                        icon: 'success',
                        confirmButtonText: 'Đóng'
                    });
                    this.reset();
                } else {
                    Swal.fire('Lỗi!', data.message || 'Có lỗi xảy ra khi gửi tin nhắn.', 'error');
                }
            })
            .catch(error => {
                Swal.fire('Lỗi!', 'Có lỗi xảy ra khi gửi tin nhắn.', 'error');
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalText;
            });
    });
</script>