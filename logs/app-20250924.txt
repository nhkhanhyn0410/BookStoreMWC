2025-09-24 03:47:02.817 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-24 03:47:04.701 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:47:04.751 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 03:47:04.772 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 03:47:04.823 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 03:47:04.833 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:47:04.836 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 03:47:04.842 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 03:47:04.851 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 03:47:04.856 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 03:47:05.107 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:47:05.140 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:47:05.189 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:47:05.230 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:47:05.236 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:47:05.239 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:47:05.242 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:47:05.245 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:47:05.249 +07:00 [INF] Database initialization completed successfully.
2025-09-24 03:47:05.348 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:47:05.349 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 03:47:05.350 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 03:47:05.353 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 03:47:05.356 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:47:05.358 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 03:47:05.360 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 03:47:05.361 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 03:47:05.362 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 03:47:05.365 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:47:05.367 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:47:05.369 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:47:05.372 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:47:05.374 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:47:05.377 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:47:05.380 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:47:05.384 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:47:05.386 +07:00 [INF] Database initialization completed successfully.
2025-09-24 03:47:05.388 +07:00 [INF] BookStore application starting up...
2025-09-24 03:47:05.486 +07:00 [INF] Now listening on: http://localhost:5232
2025-09-24 03:47:05.487 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-24 03:47:05.488 +07:00 [INF] Hosting environment: Development
2025-09-24 03:47:05.488 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-09-24 03:47:46.360 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 03:47:46.707 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-24 03:47:46.773 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:47:46.790 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 03:47:46.937 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:47:47.006 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:47:47.037 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 03:47:47.062 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 03:47:47.082 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 03:47:47.092 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:47:47.103 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:47:47.117 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 03:47:47.143 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:47:47.165 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 03:47:47.185 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 03:47:47.254 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:47:47.273 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 03:47:47.310 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 03:47:47.518 +07:00 [INF] Executed ViewResult - view Index executed in 208.3866ms.
2025-09-24 03:47:47.524 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 730.6723ms
2025-09-24 03:47:47.526 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:47:47.530 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/css/output.css?v=YR0oZDuEY6GJkDXELbFPrMV0WcQ3SauY9qTKxDcI2S4 - null null
2025-09-24 03:47:47.535 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 1175.7604ms
2025-09-24 03:47:47.537 +07:00 [INF] The file /css/output.css was not modified
2025-09-24 03:47:47.539 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 03:47:47.540 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/site.js?v=ZXp-KKengpsH6WmJm6Jx0S24LuE3sZ1PUD1PsWxDP5I - null null
2025-09-24 03:47:47.540 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/css/output.css?v=YR0oZDuEY6GJkDXELbFPrMV0WcQ3SauY9qTKxDcI2S4 - 304 null text/css 10.3666ms
2025-09-24 03:47:47.542 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 03:47:47.543 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 03:47:47.543 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 03:47:47.546 +07:00 [INF] The file /js/site.js was not modified
2025-09-24 03:47:47.550 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 03:47:47.551 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 11.9766ms
2025-09-24 03:47:47.557 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 15.3863ms
2025-09-24 03:47:47.558 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 15.1414ms
2025-09-24 03:47:47.562 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/site.js?v=ZXp-KKengpsH6WmJm6Jx0S24LuE3sZ1PUD1PsWxDP5I - 304 null text/javascript 21.9236ms
2025-09-24 03:47:47.562 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 18.7804ms
2025-09-24 03:47:47.568 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 17.7191ms
2025-09-24 03:47:47.572 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 03:47:47.573 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 03:47:47.576 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 03:47:47.583 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 03:47:47.585 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 03:47:47.588 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 03:47:47.589 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 03:47:47.591 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 03:47:47.593 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 03:47:47.598 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 9.8679ms
2025-09-24 03:47:47.598 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 8.882ms
2025-09-24 03:47:47.600 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 8.8662ms
2025-09-24 03:47:47.602 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 8.432ms
2025-09-24 03:47:47.604 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 03:47:47.606 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 03:47:47.608 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 03:47:47.611 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 03:47:50.077 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/account/Login - null null
2025-09-24 03:47:50.080 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 03:47:50.090 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-09-24 03:47:50.108 +07:00 [INF] Executing ViewResult, running view Login.
2025-09-24 03:47:50.187 +07:00 [INF] Executed ViewResult - view Login executed in 80.5607ms.
2025-09-24 03:47:50.188 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 96.7146ms
2025-09-24 03:47:50.189 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 03:47:50.190 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/account/Login - 200 null text/html; charset=utf-8 112.4398ms
2025-09-24 03:47:50.212 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/css/output.css - null null
2025-09-24 03:47:50.215 +07:00 [INF] The file /css/output.css was not modified
2025-09-24 03:47:50.216 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/css/output.css - 304 null text/css 3.6188ms
2025-09-24 03:47:50.216 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 03:47:50.216 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 03:47:50.216 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 03:47:50.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 03:47:50.217 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 03:47:50.220 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - null null
2025-09-24 03:47:50.221 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 4.9573ms
2025-09-24 03:47:50.223 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 6.8348ms
2025-09-24 03:47:50.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 9.1499ms
2025-09-24 03:47:50.228 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 10.8954ms
2025-09-24 03:47:50.231 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 14.6857ms
2025-09-24 03:47:50.234 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - 404 0 null 13.4869ms
2025-09-24 03:47:50.236 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 03:47:50.238 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 03:47:50.240 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 03:47:50.243 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 03:47:50.246 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 03:47:50.249 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/bookverse-core.js, Response status code: 404
2025-09-24 03:47:50.250 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - null null
2025-09-24 03:47:50.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/login.js?v=5_yFtJP0kybVWGRgPOeI8tFeD4mu70Hwg3BRWviBUds - null null
2025-09-24 03:47:50.254 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 03:47:50.254 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 03:47:50.256 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 03:47:50.260 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - 404 0 null 9.9485ms
2025-09-24 03:47:50.262 +07:00 [INF] The file /js/login.js was not modified
2025-09-24 03:47:50.266 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 12.2019ms
2025-09-24 03:47:50.290 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 03:47:50.271 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 14.7671ms
2025-09-24 03:47:50.305 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 03:47:50.273 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/login.js?v=5_yFtJP0kybVWGRgPOeI8tFeD4mu70Hwg3BRWviBUds - 304 null text/javascript 21.1785ms
2025-09-24 03:47:50.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 13.413ms
2025-09-24 03:47:50.272 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/auth-validation.js, Response status code: 404
2025-09-24 03:47:50.333 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 03:47:53.502 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/account/Login - application/x-www-form-urlencoded 248
2025-09-24 03:47:53.505 +07:00 [INF] CORS policy execution failed.
2025-09-24 03:47:53.506 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-09-24 03:47:53.511 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 03:47:53.521 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookStoreMVC.Models.ViewModels.LoginViewModel, System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-09-24 03:47:53.595 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-24 03:47:53.849 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-09-24 03:47:53.872 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-24 03:47:53.880 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:47:53.891 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-09-24 03:47:53.901 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-09-24 03:47:53.904 +07:00 [INF] User logged in.
2025-09-24 03:47:53.907 +07:00 [INF] Executing LocalRedirectResult, redirecting to /.
2025-09-24 03:47:53.909 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 386.3745ms
2025-09-24 03:47:53.912 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 03:47:53.914 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/account/Login - 302 0 null 411.5669ms
2025-09-24 03:47:53.918 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 03:47:53.929 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:47:53.930 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 03:47:53.936 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:47:53.945 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:47:53.949 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 03:47:53.953 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 03:47:53.959 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:47:53.964 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:47:53.967 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 03:47:53.973 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:47:53.982 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 03:47:53.989 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:47:53.993 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 03:47:53.996 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 03:47:54.013 +07:00 [INF] Executed ViewResult - view Index executed in 17.5358ms.
2025-09-24 03:47:54.016 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 83.9799ms
2025-09-24 03:47:54.017 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:47:54.019 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 100.1413ms
2025-09-24 03:47:54.044 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 03:47:54.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 03:47:54.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 03:47:54.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 03:47:54.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 03:47:54.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 03:47:54.048 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 4.3042ms
2025-09-24 03:47:54.063 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 15.4405ms
2025-09-24 03:47:54.063 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 15.3609ms
2025-09-24 03:47:54.063 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 15.4435ms
2025-09-24 03:47:54.063 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 15.2621ms
2025-09-24 03:47:54.063 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 15.2611ms
2025-09-24 03:47:54.065 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 03:47:54.068 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 03:47:54.070 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 03:47:54.073 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 03:47:54.078 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 03:47:54.081 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 03:47:54.083 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 03:47:54.085 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 03:47:54.089 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 03:47:54.097 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 13.6506ms
2025-09-24 03:47:54.099 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 14.0208ms
2025-09-24 03:47:54.102 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 12.8202ms
2025-09-24 03:47:54.104 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 03:47:54.107 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 03:47:54.110 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 03:48:04.199 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:48:04.202 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:48:04.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 30.1157ms
2025-09-24 03:54:42.596 +07:00 [INF] Application is shutting down...
2025-09-24 03:55:00.473 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-24 03:55:01.339 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:55:01.350 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 03:55:01.374 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 03:55:01.465 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 03:55:01.480 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:55:01.482 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 03:55:01.492 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 03:55:01.504 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 03:55:01.508 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 03:55:01.751 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:55:01.791 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:55:01.864 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:55:01.915 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:55:01.923 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:55:01.925 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:55:01.927 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:55:01.928 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:55:01.931 +07:00 [INF] Database initialization completed successfully.
2025-09-24 03:55:02.064 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:55:02.065 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 03:55:02.066 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 03:55:02.071 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 03:55:02.074 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:55:02.075 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 03:55:02.077 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 03:55:02.078 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 03:55:02.080 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 03:55:02.083 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:55:02.085 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:55:02.087 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:55:02.089 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:55:02.091 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:55:02.092 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:55:02.094 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:55:02.096 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:55:02.097 +07:00 [INF] Database initialization completed successfully.
2025-09-24 03:55:02.097 +07:00 [INF] BookStore application starting up...
2025-09-24 03:55:02.171 +07:00 [INF] Now listening on: http://localhost:5232
2025-09-24 03:55:02.174 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-24 03:55:02.175 +07:00 [INF] Hosting environment: Development
2025-09-24 03:55:02.175 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-09-24 03:55:02.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 03:55:02.391 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-24 03:55:02.443 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:55:02.453 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 03:55:02.602 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:55:02.683 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:55:02.695 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 03:55:02.732 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 03:55:02.743 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 03:55:02.753 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:55:02.770 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:55:02.782 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 03:55:02.807 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:55:02.819 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 03:55:02.874 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 03:55:02.887 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:55:02.906 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 03:55:02.936 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 03:55:03.072 +07:00 [INF] Executed ViewResult - view Index executed in 136.4081ms.
2025-09-24 03:55:03.076 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 622.3283ms
2025-09-24 03:55:03.077 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:55:03.083 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 03:55:03.086 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 702.6422ms
2025-09-24 03:55:03.090 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 6.3256ms
2025-09-24 03:55:03.091 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 03:55:03.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 03:55:03.097 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 03:55:03.099 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 03:55:03.099 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 03:55:03.101 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 03:55:03.101 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 03:55:03.114 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 19.8276ms
2025-09-24 03:55:03.114 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 14.8688ms
2025-09-24 03:55:03.114 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 13.0978ms
2025-09-24 03:55:03.114 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 14.8686ms
2025-09-24 03:55:03.115 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 03:55:03.114 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 13.556ms
2025-09-24 03:55:03.115 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 03:55:03.115 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 03:55:03.115 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 03:55:03.115 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 03:55:03.114 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 17.1346ms
2025-09-24 03:55:03.115 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 03:55:03.122 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:55:03.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 03:55:03.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 03:55:03.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 2.2509ms
2025-09-24 03:55:03.126 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 03:55:03.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 4.4458ms
2025-09-24 03:55:03.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 4.0163ms
2025-09-24 03:55:03.128 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 03:55:13.613 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:55:13.614 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:55:13.638 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 25.2594ms
2025-09-24 03:55:13.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:55:13.671 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.9775ms
2025-09-24 03:56:13.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:13.123 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:13.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 1.6279ms
2025-09-24 03:56:13.152 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:13.153 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.5223ms
2025-09-24 03:56:14.200 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:14.200 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:14.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 2.1666ms
2025-09-24 03:56:14.225 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:14.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4925ms
2025-09-24 03:56:14.699 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:14.699 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:14.700 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 1.4872ms
2025-09-24 03:56:14.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:14.724 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3564ms
2025-09-24 03:56:15.703 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:15.703 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:15.706 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 2.7358ms
2025-09-24 03:56:15.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:15.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3558ms
2025-09-24 03:56:28.832 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:28.833 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:28.835 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 3.4492ms
2025-09-24 03:56:28.858 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:28.859 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4828ms
2025-09-24 03:56:31.356 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:31.356 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:31.357 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 1.4211ms
2025-09-24 03:56:31.377 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:31.377 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1682ms
2025-09-24 03:56:31.872 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:31.873 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: 

BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)
BookStoreMVC.Controllers.AdminController.ManageUsers (BookStoreMVC)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ReportAmbiguity(Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.ProcessFinalCandidates(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DefaultEndpointSelector.Select(HttpContext httpContext, Span`1 candidateState)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcher.MatchAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:31.874 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 1.7934ms
2025-09-24 03:56:31.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:31.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1737ms
2025-09-24 03:56:35.775 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 03:56:35.776 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:56:35.780 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 03:56:35.786 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:56:35.791 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:56:35.795 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 03:56:35.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 03:56:35.800 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:56:35.801 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:56:35.802 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 03:56:35.804 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:56:35.805 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 03:56:35.807 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:56:35.809 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 03:56:35.810 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 03:56:35.826 +07:00 [INF] Executed ViewResult - view Index executed in 16.056ms.
2025-09-24 03:56:35.826 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 45.9109ms
2025-09-24 03:56:35.826 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:56:35.827 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 51.6497ms
2025-09-24 03:56:35.846 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:35.846 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2434ms
2025-09-24 03:56:37.760 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:37.760 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1866ms
2025-09-24 03:56:48.536 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-24 03:56:49.333 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:56:49.344 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 03:56:49.370 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 03:56:49.427 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 03:56:49.439 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:56:49.440 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 03:56:49.447 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 03:56:49.458 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 03:56:49.462 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 03:56:49.647 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:56:49.705 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:56:49.716 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:56:49.759 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:56:49.766 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:56:49.768 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:56:49.769 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:56:49.770 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:56:49.772 +07:00 [INF] Database initialization completed successfully.
2025-09-24 03:56:49.879 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:56:49.880 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 03:56:49.880 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 03:56:49.883 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 03:56:49.884 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:56:49.885 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 03:56:49.886 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 03:56:49.886 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 03:56:49.887 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 03:56:49.889 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:56:49.892 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:56:49.894 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:56:49.897 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:56:49.899 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:56:49.901 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:56:49.903 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:56:49.905 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:56:49.906 +07:00 [INF] Database initialization completed successfully.
2025-09-24 03:56:49.907 +07:00 [INF] BookStore application starting up...
2025-09-24 03:56:49.966 +07:00 [INF] Now listening on: http://localhost:5232
2025-09-24 03:56:49.966 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-24 03:56:49.966 +07:00 [INF] Hosting environment: Development
2025-09-24 03:56:49.966 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-09-24 03:56:50.005 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:50.012 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-24 03:56:50.059 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 03:56:50.067 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 03:56:50.137 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:56:50.145 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:56:50.149 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 03:56:50.153 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 03:56:50.170 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:56:50.180 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 03:56:50.188 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 03:56:50.199 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 03:56:50.299 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 03:56:50.312 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:56:50.323 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 03:56:50.332 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-09-24 03:56:50.342 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 03:56:50.382 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 03:56:50.405 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 03:56:50.408 +07:00 [ERR] The view 'Dashboard' was not found. Searched locations: ["/Views/Admin/Dashboard.cshtml","/Views/Shared/Dashboard.cshtml"]
2025-09-24 03:56:50.414 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 344.2008ms
2025-09-24 03:56:50.418 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 03:56:50.420 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'Dashboard' was not found. The following locations were searched:
/Views/Admin/Dashboard.cshtml
/Views/Shared/Dashboard.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:50.443 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 440.0138ms
2025-09-24 03:56:50.467 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:50.470 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 2.8276ms
2025-09-24 03:56:51.290 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:56:51.295 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 03:56:51.295 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 03:56:51.298 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:56:51.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:56:51.302 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 03:56:51.304 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 03:56:51.306 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:56:51.307 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 03:56:51.309 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 03:56:51.310 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 03:56:51.312 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 03:56:51.313 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:56:51.314 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 03:56:51.316 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 03:56:51.319 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 03:56:51.320 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 03:56:51.321 +07:00 [ERR] The view 'Dashboard' was not found. Searched locations: ["/Views/Admin/Dashboard.cshtml","/Views/Shared/Dashboard.cshtml"]
2025-09-24 03:56:51.321 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 25.709ms
2025-09-24 03:56:51.321 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 03:56:51.322 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'Dashboard' was not found. The following locations were searched:
/Views/Admin/Dashboard.cshtml
/Views/Shared/Dashboard.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:56:51.325 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 34.5722ms
2025-09-24 03:56:51.346 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:56:51.347 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.7301ms
2025-09-24 03:57:35.213 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:57:35.230 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 03:57:35.231 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 03:57:35.273 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:57:35.276 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:57:35.277 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 03:57:35.280 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 03:57:35.282 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:57:35.283 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 03:57:35.285 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 03:57:35.287 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 03:57:35.290 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 03:57:35.294 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:57:35.298 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 03:57:35.300 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 03:57:35.303 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 03:57:35.304 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 03:57:35.305 +07:00 [ERR] The view 'Dashboard' was not found. Searched locations: ["/Views/Admin/Dashboard.cshtml","/Views/Shared/Dashboard.cshtml"]
2025-09-24 03:57:35.305 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 74.4772ms
2025-09-24 03:57:35.305 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 03:57:35.306 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'Dashboard' was not found. The following locations were searched:
/Views/Admin/Dashboard.cshtml
/Views/Shared/Dashboard.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:57:35.309 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 95.2345ms
2025-09-24 03:57:35.345 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:57:35.346 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4619ms
2025-09-24 03:57:37.665 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 03:57:37.666 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:57:37.672 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 03:57:37.827 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:57:37.919 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 03:57:37.940 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 03:57:37.974 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 03:57:37.989 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 03:57:37.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:57:37.993 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:57:38.007 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 03:57:38.038 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:57:38.051 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 03:57:38.085 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 03:57:38.125 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:57:38.148 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 03:57:38.193 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 03:57:38.430 +07:00 [INF] Executed ViewResult - view Index executed in 240.7157ms.
2025-09-24 03:57:38.431 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 758.4392ms
2025-09-24 03:57:38.431 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 03:57:38.432 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 767.1106ms
2025-09-24 03:57:38.464 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:57:38.464 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4679ms
2025-09-24 03:57:40.428 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:57:40.428 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2171ms
2025-09-24 03:57:51.243 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-24 03:57:51.900 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:57:51.909 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 03:57:51.929 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 03:57:51.976 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 03:57:51.986 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:57:51.988 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 03:57:51.993 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 03:57:52.003 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 03:57:52.006 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 03:57:52.177 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:57:52.208 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:57:52.226 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:57:52.280 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:57:52.286 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:57:52.290 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:57:52.292 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:57:52.294 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:57:52.296 +07:00 [INF] Database initialization completed successfully.
2025-09-24 03:57:52.391 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:57:52.391 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 03:57:52.392 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 03:57:52.394 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 03:57:52.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 03:57:52.397 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 03:57:52.398 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 03:57:52.399 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 03:57:52.400 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 03:57:52.402 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:57:52.404 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 03:57:52.405 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:57:52.406 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:57:52.406 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 03:57:52.407 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:57:52.408 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:57:52.410 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 03:57:52.411 +07:00 [INF] Database initialization completed successfully.
2025-09-24 03:57:52.411 +07:00 [INF] BookStore application starting up...
2025-09-24 03:57:52.497 +07:00 [INF] Now listening on: http://localhost:5232
2025-09-24 03:57:52.497 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-24 03:57:52.497 +07:00 [INF] Hosting environment: Development
2025-09-24 03:57:52.497 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-09-24 03:57:52.529 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 03:57:52.536 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-24 03:57:52.577 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 03:57:52.586 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 03:57:52.656 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 03:57:52.662 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 03:57:52.666 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 03:57:52.671 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 03:57:52.684 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 03:57:52.693 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 03:57:52.697 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 03:57:52.703 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 03:57:52.745 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 03:57:52.764 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 03:57:52.775 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 03:57:52.782 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-09-24 03:57:52.792 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 03:57:52.824 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 03:57:52.850 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 03:57:52.996 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 408.2915ms
2025-09-24 03:57:52.999 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 03:57:53.000 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The following sections have been defined but have not been rendered by the page at '/Views/Shared/_AdminLayout.cshtml': 'Styles'. To ignore an unrendered section call IgnoreSection("sectionName").
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.EnsureRenderedBodyOrSections()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 03:57:53.071 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 543.3335ms
2025-09-24 03:57:53.089 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:57:53.091 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 2.0604ms
2025-09-24 03:57:57.513 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Dashboard - null null
2025-09-24 03:57:57.517 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Dashboard - 404 0 null 4.0704ms
2025-09-24 03:57:57.517 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Dashboard, Response status code: 404
2025-09-24 03:57:59.378 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Dashboard - null null
2025-09-24 03:57:59.396 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Dashboard - 404 0 null 17.484ms
2025-09-24 03:57:59.396 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Dashboard, Response status code: 404
2025-09-24 03:57:59.749 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Dashboard - null null
2025-09-24 03:57:59.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Dashboard - 404 0 null 1.5525ms
2025-09-24 03:57:59.751 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Dashboard, Response status code: 404
2025-09-24 03:57:59.898 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Dashboard - null null
2025-09-24 03:57:59.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Dashboard - 404 0 null 2.0935ms
2025-09-24 03:57:59.900 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Dashboard, Response status code: 404
2025-09-24 03:58:00.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 03:58:00.435 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.707ms
2025-09-24 04:00:20.289 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:00:20.293 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:00:20.294 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:00:20.304 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:00:20.306 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:00:20.309 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:00:20.312 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:00:20.315 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:00:20.317 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:00:20.319 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:00:20.320 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:00:20.324 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:00:20.326 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:00:20.329 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:00:20.331 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:00:20.338 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:00:20.342 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:00:20.352 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 58.4906ms
2025-09-24 04:00:20.353 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:00:20.353 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The following sections have been defined but have not been rendered by the page at '/Views/Shared/_AdminLayout.cshtml': 'Styles'. To ignore an unrendered section call IgnoreSection("sectionName").
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.EnsureRenderedBodyOrSections()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 04:00:20.359 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 69.729ms
2025-09-24 04:00:20.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:00:20.385 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3448ms
2025-09-24 04:00:48.846 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:00:48.848 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:00:48.851 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:00:48.856 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:00:48.857 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:00:48.859 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:00:48.860 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:00:48.861 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:00:48.863 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:00:48.864 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:00:48.867 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:00:48.868 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:00:48.870 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:00:48.872 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:00:48.873 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:00:48.879 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:00:48.882 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:00:48.938 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 85.9786ms
2025-09-24 04:00:48.938 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:00:48.938 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The following sections have been defined but have not been rendered by the page at '/Views/Shared/_AdminLayout.cshtml': 'Styles'. To ignore an unrendered section call IgnoreSection("sectionName").
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.EnsureRenderedBodyOrSections()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 04:00:48.941 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 95.2229ms
2025-09-24 04:00:48.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:00:48.963 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4648ms
2025-09-24 04:00:49.292 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:00:49.294 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:00:49.294 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:00:49.295 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:00:49.296 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:00:49.296 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:00:49.297 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:00:49.298 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:00:49.299 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:00:49.299 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:00:49.300 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:00:49.301 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:00:49.303 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:00:49.304 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:00:49.305 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:00:49.306 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:00:49.307 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:00:49.311 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 16.7719ms
2025-09-24 04:00:49.311 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:00:49.311 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The following sections have been defined but have not been rendered by the page at '/Views/Shared/_AdminLayout.cshtml': 'Styles'. To ignore an unrendered section call IgnoreSection("sectionName").
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.EnsureRenderedBodyOrSections()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 04:00:49.316 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 500 null text/html; charset=utf-8 23.6271ms
2025-09-24 04:00:49.332 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:00:49.333 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3068ms
2025-09-24 04:01:07.256 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:01:07.256 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:01:07.257 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:01:07.266 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:01:07.267 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:01:07.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:01:07.270 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:01:07.272 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:01:07.274 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:01:07.276 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:01:07.277 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:01:07.279 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:01:07.280 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:01:07.281 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:01:07.282 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:01:07.283 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:01:07.285 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:01:07.332 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:01:07.332 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:01:07.336 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:01:07.338 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:01:07.338 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:01:07.339 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:01:07.339 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:01:07.340 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:01:07.341 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:01:07.342 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:01:07.342 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:01:07.343 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:01:07.344 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:01:07.346 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:01:07.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:01:07.351 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:01:07.353 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:01:07.368 +07:00 [INF] Executed ViewResult - view Dashboard executed in 83.9494ms.
2025-09-24 04:01:07.368 +07:00 [INF] Executed ViewResult - view Dashboard executed in 15.6073ms.
2025-09-24 04:01:07.368 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 111.7693ms
2025-09-24 04:01:07.368 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 31.8432ms
2025-09-24 04:01:07.368 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:01:07.368 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:01:07.369 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 112.8571ms
2025-09-24 04:01:07.369 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 36.9786ms
2025-09-24 04:01:07.392 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 04:01:07.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 2.9366ms
2025-09-24 04:01:07.395 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 04:01:07.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 04:01:07.398 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.4329ms
2025-09-24 04:01:07.399 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 04:01:07.589 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:01:07.590 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2888ms
2025-09-24 04:01:17.680 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 04:01:17.681 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 04:01:17.716 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 04:01:17.757 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:01:17.797 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 04:01:17.857 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 04:01:17.860 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:01:18.028 +07:00 [INF] Executed ViewResult - view Index executed in 168.6558ms.
2025-09-24 04:01:18.028 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 312.667ms
2025-09-24 04:01:18.029 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 04:01:18.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 349.2001ms
2025-09-24 04:01:18.050 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 04:01:18.052 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.8254ms
2025-09-24 04:01:18.052 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 04:01:18.057 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:01:18.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2599ms
2025-09-24 04:01:18.058 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:01:18.060 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.6431ms
2025-09-24 04:01:18.060 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:01:18.061 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:01:18.062 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.2283ms
2025-09-24 04:01:18.062 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:01:18.063 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:01:18.064 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:01:18.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.4344ms
2025-09-24 04:01:18.065 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:01:18.065 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.1317ms
2025-09-24 04:01:18.065 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:01:18.065 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:01:18.066 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:01:18.067 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.3847ms
2025-09-24 04:01:18.067 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:01:18.067 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.0026ms
2025-09-24 04:01:18.067 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:01:18.068 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:01:18.069 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:01:18.069 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.3556ms
2025-09-24 04:01:18.069 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:01:18.070 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.2018ms
2025-09-24 04:01:18.070 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:01:25.808 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/account/Settings - null null
2025-09-24 04:01:25.810 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/account/Settings - 404 0 null 1.6129ms
2025-09-24 04:01:25.810 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/account/Settings, Response status code: 404
2025-09-24 04:01:27.072 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 04:01:27.073 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 04:01:27.074 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 04:01:27.076 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:01:27.077 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 04:01:27.081 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 04:01:27.082 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:01:27.087 +07:00 [INF] Executed ViewResult - view Index executed in 4.9493ms.
2025-09-24 04:01:27.087 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 13.1872ms
2025-09-24 04:01:27.087 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 04:01:27.087 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 14.847ms
2025-09-24 04:01:27.119 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:01:27.119 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1668ms
2025-09-24 04:01:53.335 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:01:53.336 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:01:53.336 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:01:53.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:01:53.338 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:01:53.339 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:01:53.339 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:01:53.341 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:01:53.342 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:01:53.342 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:01:53.344 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:01:53.345 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:01:53.348 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:01:53.349 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:01:53.349 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:01:53.352 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:01:53.352 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:01:53.354 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.8598ms.
2025-09-24 04:01:53.354 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 18.5272ms
2025-09-24 04:01:53.354 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:01:53.355 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 19.6468ms
2025-09-24 04:01:53.395 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:01:53.396 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.253ms
2025-09-24 04:02:03.927 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Settings/Shipping?area=Admin - null null
2025-09-24 04:02:03.928 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Settings/Shipping?area=Admin - 404 0 null 0.8878ms
2025-09-24 04:02:03.928 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Settings/Shipping, Response status code: 404
2025-09-24 04:02:05.060 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:02:05.061 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:02:05.061 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:02:05.062 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:02:05.063 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:05.063 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:02:05.063 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:05.064 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:02:05.065 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:02:05.066 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:02:05.067 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:02:05.068 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:02:05.070 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:02:05.071 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:02:05.073 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:02:05.075 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:02:05.076 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:02:05.079 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.9685ms.
2025-09-24 04:02:05.079 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 17.8141ms
2025-09-24 04:02:05.079 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:02:05.079 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 19.1446ms
2025-09-24 04:02:05.129 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:02:05.129 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2289ms
2025-09-24 04:02:06.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Settings/Payment?area=Admin - null null
2025-09-24 04:02:06.878 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Settings/Payment?area=Admin - 404 0 null 0.5205ms
2025-09-24 04:02:06.878 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Settings/Payment, Response status code: 404
2025-09-24 04:02:07.698 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:02:07.699 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:02:07.699 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:02:07.700 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:02:07.701 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:07.701 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:02:07.702 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:07.702 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:02:07.703 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:02:07.704 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:02:07.705 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:02:07.706 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:02:07.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:02:07.710 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:02:07.733 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:02:07.735 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:02:07.736 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:02:07.738 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.5742ms.
2025-09-24 04:02:07.738 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 38.7346ms
2025-09-24 04:02:07.738 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:02:07.738 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 40.1446ms
2025-09-24 04:02:07.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:02:07.778 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1814ms
2025-09-24 04:02:09.138 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Settings/General?area=Admin - null null
2025-09-24 04:02:09.138 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Settings/General?area=Admin - 404 0 null 0.6462ms
2025-09-24 04:02:09.138 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Settings/General, Response status code: 404
2025-09-24 04:02:09.736 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:02:09.737 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:02:09.737 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:02:09.738 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:02:09.739 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:09.740 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:02:09.740 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:09.741 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:02:09.742 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:02:09.743 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:02:09.744 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:02:09.745 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:02:09.746 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:02:09.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:02:09.750 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:02:09.754 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:02:09.755 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:02:09.757 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.7315ms.
2025-09-24 04:02:09.757 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 19.5543ms
2025-09-24 04:02:09.757 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:02:09.757 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 21.106ms
2025-09-24 04:02:09.806 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:02:09.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2178ms
2025-09-24 04:02:11.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Settings/General?area=Admin - null null
2025-09-24 04:02:11.403 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Settings/General?area=Admin - 404 0 null 0.7119ms
2025-09-24 04:02:11.403 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Settings/General, Response status code: 404
2025-09-24 04:02:12.720 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:02:12.721 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:02:12.721 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:02:12.722 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:02:12.723 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:12.723 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:02:12.724 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:12.724 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:02:12.725 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:02:12.725 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:02:12.726 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:02:12.727 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:02:12.729 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:02:12.730 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:02:12.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:02:12.734 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:02:12.735 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:02:12.737 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.654ms.
2025-09-24 04:02:12.737 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 15.6323ms
2025-09-24 04:02:12.737 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:02:12.737 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 16.8518ms
2025-09-24 04:02:12.781 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:02:12.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2344ms
2025-09-24 04:02:14.690 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 04:02:14.691 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 04:02:14.694 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 04:02:14.726 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 04:02:14.743 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 04:02:14.754 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 04:02:14.777 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 04:02:14.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 04:02:14.784 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:02:14.785 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:02:14.792 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 04:02:14.810 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:02:14.818 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 04:02:14.835 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 04:02:14.852 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:14.853 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 04:02:14.868 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:02:14.898 +07:00 [INF] Executed ViewResult - view Index executed in 31.2259ms.
2025-09-24 04:02:14.899 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 204.491ms
2025-09-24 04:02:14.899 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 04:02:14.899 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 208.412ms
2025-09-24 04:02:14.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:02:14.925 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4243ms
2025-09-24 04:02:18.293 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/account/Profile - null null
2025-09-24 04:02:18.296 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Profile (BookStoreMVC)'
2025-09-24 04:02:18.299 +07:00 [INF] Route matched with {action = "Profile", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Profile() on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-09-24 04:02:18.342 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-24 04:02:18.350 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-09-24 04:02:18.370 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0 AND [o].[Status] = 3
2025-09-24 04:02:18.377 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-09-24 04:02:18.382 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [WishlistItems] AS [w]
WHERE [w].[UserId] = @__userId_0
2025-09-24 04:02:18.403 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[Status], [o1].[Total], [o1].[CreatedAt], [s].[BookTitle], [s].[Quantity], [s].[Total], [s].[Id], [s].[Id0]
FROM (
    SELECT TOP(@__p_1) [o].[Id], [o].[Status], [o].[Total], [o].[CreatedAt]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
) AS [o1]
LEFT JOIN (
    SELECT [b].[Title] AS [BookTitle], [o0].[Quantity], [o0].[Total], [o0].[Id], [b].[Id] AS [Id0], [o0].[OrderId]
    FROM [OrderItems] AS [o0]
    LEFT JOIN [Books] AS [b] ON [o0].[BookId] = [b].[Id]
) AS [s] ON [o1].[Id] = [s].[OrderId]
ORDER BY [o1].[CreatedAt] DESC, [o1].[Id], [s].[Id]
2025-09-24 04:02:18.413 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[Rating]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:02:18.419 +07:00 [INF] Executing ViewResult, running view Profile.
2025-09-24 04:02:18.468 +07:00 [INF] Executed ViewResult - view Profile executed in 49.1116ms.
2025-09-24 04:02:18.468 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Profile (BookStoreMVC) in 168.6935ms
2025-09-24 04:02:18.468 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Profile (BookStoreMVC)'
2025-09-24 04:02:18.468 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/account/Profile - 200 null text/html; charset=utf-8 175.2656ms
2025-09-24 04:02:18.492 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:02:18.494 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 2.1528ms
2025-09-24 04:02:18.494 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:02:18.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:02:18.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:02:18.497 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2634ms
2025-09-24 04:02:18.497 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:02:18.497 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:02:18.498 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.6968ms
2025-09-24 04:02:18.498 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.4961ms
2025-09-24 04:02:18.498 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:02:18.498 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:02:18.498 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:02:18.499 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.5562ms
2025-09-24 04:02:18.499 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:02:18.499 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.8106ms
2025-09-24 04:02:18.499 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:02:18.500 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:02:18.502 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.9717ms
2025-09-24 04:02:18.502 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:02:18.507 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:02:18.507 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:02:18.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.4914ms
2025-09-24 04:02:18.509 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:02:18.508 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.4917ms
2025-09-24 04:02:18.509 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:02:21.963 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 04:02:21.964 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 04:02:21.964 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 04:02:21.966 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 04:02:21.969 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 04:02:21.973 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 04:02:21.977 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 04:02:21.980 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:02:21.981 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:02:21.984 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 04:02:21.986 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:02:21.988 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 04:02:21.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:02:21.994 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 04:02:21.995 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:02:22.009 +07:00 [INF] Executed ViewResult - view Index executed in 13.6323ms.
2025-09-24 04:02:22.011 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 46.9487ms
2025-09-24 04:02:22.011 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 04:02:22.011 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 48.0475ms
2025-09-24 04:02:22.031 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:02:22.031 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.302ms
2025-09-24 04:03:36.165 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:03:36.166 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:36.166 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:03:36.168 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:03:36.168 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:36.169 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:03:36.169 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:36.170 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:03:36.170 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:03:36.171 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:03:36.173 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:03:36.178 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:03:36.180 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:36.182 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:03:36.183 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:03:36.186 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:03:36.188 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:03:36.191 +07:00 [INF] Executed ViewResult - view Dashboard executed in 3.7543ms.
2025-09-24 04:03:36.192 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 25.8643ms
2025-09-24 04:03:36.192 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:36.192 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 27.2615ms
2025-09-24 04:03:36.223 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 04:03:36.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.5901ms
2025-09-24 04:03:36.225 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 04:03:36.229 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:03:36.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4349ms
2025-09-24 04:03:36.229 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 04:03:36.230 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.1225ms
2025-09-24 04:03:36.231 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 04:03:39.721 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/reviews?area=Admin - null null
2025-09-24 04:03:40.631 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/reviews?area=Admin - null null
2025-09-24 04:03:40.744 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.ReviewsController.Index (BookStoreMVC)'
2025-09-24 04:03:40.744 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.ReviewsController.Index (BookStoreMVC)'
2025-09-24 04:03:40.748 +07:00 [INF] Route matched with {action = "Index", controller = "Reviews"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.ReviewListViewModel) on controller BookStoreMVC.Controllers.ReviewsController (BookStoreMVC).
2025-09-24 04:03:40.748 +07:00 [INF] Route matched with {action = "Index", controller = "Reviews"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.ReviewListViewModel) on controller BookStoreMVC.Controllers.ReviewsController (BookStoreMVC).
2025-09-24 04:03:40.770 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:40.771 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_1) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[UserId] = @__userId_0
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:40.775 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:03:40.775 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:03:40.795 +07:00 [INF] Executed ViewResult - view Index executed in 21.5814ms.
2025-09-24 04:03:40.795 +07:00 [INF] Executed ViewResult - view Index executed in 21.6067ms.
2025-09-24 04:03:40.795 +07:00 [INF] Executed action BookStoreMVC.Controllers.ReviewsController.Index (BookStoreMVC) in 47.0105ms
2025-09-24 04:03:40.795 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.ReviewsController.Index (BookStoreMVC)'
2025-09-24 04:03:40.795 +07:00 [INF] Executed action BookStoreMVC.Controllers.ReviewsController.Index (BookStoreMVC) in 46.9546ms
2025-09-24 04:03:40.795 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.ReviewsController.Index (BookStoreMVC)'
2025-09-24 04:03:40.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/reviews?area=Admin - 200 null text/html; charset=utf-8 164.1626ms
2025-09-24 04:03:40.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/reviews?area=Admin - 200 null text/html; charset=utf-8 1074.8582ms
2025-09-24 04:03:40.823 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:03:40.823 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.9345ms
2025-09-24 04:03:40.824 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:03:40.826 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:03:40.826 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:03:40.826 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2907ms
2025-09-24 04:03:40.826 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:03:40.827 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.0385ms
2025-09-24 04:03:40.827 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:03:40.827 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.7059ms
2025-09-24 04:03:40.827 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:03:40.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:03:40.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:03:40.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.572ms
2025-09-24 04:03:40.828 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.6978ms
2025-09-24 04:03:40.828 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:03:40.828 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:03:40.829 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:03:40.831 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.0891ms
2025-09-24 04:03:40.831 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:03:40.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:03:40.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:03:40.834 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.8359ms
2025-09-24 04:03:40.834 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.9645ms
2025-09-24 04:03:40.834 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:03:40.834 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:03:41.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:03:41.956 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:41.956 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:03:41.958 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:03:41.958 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:41.959 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:03:41.959 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:41.960 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:03:41.961 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:03:41.962 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:03:41.963 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:03:41.980 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:03:41.987 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:41.991 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:03:41.997 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:03:41.999 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:03:42.000 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:03:42.002 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.891ms.
2025-09-24 04:03:42.002 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 45.3118ms
2025-09-24 04:03:42.002 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:42.002 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 46.5886ms
2025-09-24 04:03:42.050 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:03:42.052 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 1.5715ms
2025-09-24 04:03:45.892 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Reports/Sales?area=Admin - null null
2025-09-24 04:03:45.893 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Reports/Sales?area=Admin - 404 0 null 0.6507ms
2025-09-24 04:03:45.893 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Reports/Sales, Response status code: 404
2025-09-24 04:03:47.190 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:03:47.191 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:47.191 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:03:47.192 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:03:47.193 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:47.193 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:03:47.194 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:47.194 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:03:47.195 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:03:47.196 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:03:47.197 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:03:47.198 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:03:47.200 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:47.201 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:03:47.203 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:03:47.204 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:03:47.205 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:03:47.207 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.796ms.
2025-09-24 04:03:47.207 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 16.0559ms
2025-09-24 04:03:47.207 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:47.208 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 17.1904ms
2025-09-24 04:03:47.257 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:03:47.257 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.187ms
2025-09-24 04:03:48.694 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Reports/Sales?area=Admin - null null
2025-09-24 04:03:48.695 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Reports/Sales?area=Admin - 404 0 null 0.5971ms
2025-09-24 04:03:48.695 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Reports/Sales, Response status code: 404
2025-09-24 04:03:49.210 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:03:49.210 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:49.211 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:03:49.212 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:03:49.212 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:49.213 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:03:49.213 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:49.214 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:03:49.214 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:03:49.214 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:03:49.215 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:03:49.216 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:03:49.218 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:49.220 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:03:49.222 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:03:49.223 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:03:49.224 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:03:49.226 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.1504ms.
2025-09-24 04:03:49.226 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 15.4407ms
2025-09-24 04:03:49.226 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:49.226 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 16.6133ms
2025-09-24 04:03:49.275 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:03:49.276 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1224ms
2025-09-24 04:03:50.687 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Dashboard?area=Admin - null null
2025-09-24 04:03:50.688 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Dashboard?area=Admin - 404 0 null 0.5085ms
2025-09-24 04:03:50.688 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Dashboard, Response status code: 404
2025-09-24 04:03:51.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:03:51.328 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:51.328 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:03:51.329 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:03:51.329 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:51.329 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:03:51.330 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:51.330 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:03:51.330 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:03:51.331 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:03:51.332 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:03:51.332 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:03:51.334 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:51.336 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:03:51.337 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:03:51.338 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:03:51.339 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:03:51.341 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3758ms.
2025-09-24 04:03:51.341 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 12.8783ms
2025-09-24 04:03:51.341 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:51.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 13.9085ms
2025-09-24 04:03:51.387 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:03:51.387 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1587ms
2025-09-24 04:03:52.182 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Dashboard?area=Admin - null null
2025-09-24 04:03:52.182 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Dashboard?area=Admin - 404 0 null 0.3848ms
2025-09-24 04:03:52.182 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Dashboard, Response status code: 404
2025-09-24 04:03:53.861 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:03:53.862 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:53.862 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:03:53.863 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:03:53.864 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:53.864 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:03:53.864 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:53.865 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:03:53.865 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:03:53.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:03:53.867 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:03:53.867 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:03:53.869 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:53.870 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:03:53.871 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:03:53.873 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:03:53.873 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:03:53.875 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3536ms.
2025-09-24 04:03:53.875 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 12.7256ms
2025-09-24 04:03:53.875 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:53.875 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 13.7787ms
2025-09-24 04:03:53.919 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:03:53.919 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1643ms
2025-09-24 04:03:57.785 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Categories?area=Admin - null null
2025-09-24 04:03:57.786 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Categories?area=Admin - 404 0 null 0.5335ms
2025-09-24 04:03:57.786 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Categories, Response status code: 404
2025-09-24 04:03:59.125 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:03:59.126 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:59.126 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:03:59.127 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:03:59.127 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:59.127 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:03:59.128 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:03:59.128 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:03:59.128 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:03:59.129 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:03:59.129 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:03:59.130 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:03:59.131 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:03:59.133 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:03:59.135 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:03:59.137 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:03:59.138 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:03:59.139 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.0417ms.
2025-09-24 04:03:59.139 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 13.6899ms
2025-09-24 04:03:59.139 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:03:59.140 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 14.4151ms
2025-09-24 04:03:59.186 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:03:59.186 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1997ms
2025-09-24 04:04:00.915 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 04:04:00.916 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 04:04:00.916 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 04:04:00.917 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:00.918 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 04:04:00.920 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 04:04:00.920 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:04:00.923 +07:00 [INF] Executed ViewResult - view Index executed in 2.4394ms.
2025-09-24 04:04:00.923 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 7.3113ms
2025-09-24 04:04:00.923 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 04:04:00.923 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 8.0148ms
2025-09-24 04:04:00.948 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 04:04:00.949 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.7855ms
2025-09-24 04:04:00.949 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 04:04:00.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:04:00.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:04:00.951 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.145ms
2025-09-24 04:04:00.951 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.6792ms
2025-09-24 04:04:00.951 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:04:00.951 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:04:00.952 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:04:00.952 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:04:00.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5619ms
2025-09-24 04:04:00.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.6479ms
2025-09-24 04:04:00.952 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:04:00.952 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:04:00.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.4538ms
2025-09-24 04:04:00.953 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:04:00.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:04:00.955 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.7843ms
2025-09-24 04:04:00.955 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:04:00.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:04:00.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:04:00.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:04:00.956 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.8541ms
2025-09-24 04:04:00.956 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:04:00.956 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.4127ms
2025-09-24 04:04:00.956 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:04:00.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.0897ms
2025-09-24 04:04:00.957 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:04:19.825 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:04:19.825 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:04:19.825 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:04:19.826 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:04:19.827 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:19.828 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:04:19.828 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:19.829 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:04:19.830 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:04:19.830 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:04:19.832 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:04:19.833 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:04:19.836 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:04:19.838 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:04:19.839 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:04:19.842 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:04:19.844 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:04:19.846 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.9161ms.
2025-09-24 04:04:19.847 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 21.4307ms
2025-09-24 04:04:19.847 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:04:19.847 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 22.3551ms
2025-09-24 04:04:19.884 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:04:19.885 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2715ms
2025-09-24 04:04:22.218 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 04:04:22.219 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 0.6117ms
2025-09-24 04:04:22.219 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 04:04:24.366 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:04:24.366 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:04:24.366 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:04:24.368 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:04:24.368 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:24.369 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:04:24.369 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:24.370 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:04:24.370 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:04:24.371 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:04:24.372 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:04:24.374 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:04:24.375 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:04:24.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:04:24.377 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:04:24.379 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:04:24.380 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:04:24.382 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.3376ms.
2025-09-24 04:04:24.382 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 15.7297ms
2025-09-24 04:04:24.382 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:04:24.382 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 16.5351ms
2025-09-24 04:04:24.430 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:04:24.430 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1327ms
2025-09-24 04:04:35.326 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard?area=Identity&page=%2FAccount%2FManage%2FIndex - null null
2025-09-24 04:04:35.326 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:04:35.330 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:04:35.331 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:04:35.332 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:35.333 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:04:35.334 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:35.335 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:04:35.336 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:04:35.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:04:35.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:04:35.340 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:04:35.342 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:04:35.344 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:04:35.346 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:04:35.348 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:04:35.348 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:04:35.349 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.0558ms.
2025-09-24 04:04:35.349 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 19.0424ms
2025-09-24 04:04:35.349 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:04:35.350 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard?area=Identity&page=%2FAccount%2FManage%2FIndex - 200 null text/html; charset=utf-8 23.9426ms
2025-09-24 04:04:35.368 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 04:04:35.368 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 0.8741ms
2025-09-24 04:04:35.369 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 04:04:35.380 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 04:04:35.382 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.8377ms
2025-09-24 04:04:35.383 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 04:04:35.388 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:04:35.388 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2325ms
2025-09-24 04:04:37.256 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 04:04:37.256 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 04:04:37.256 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 04:04:37.259 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 04:04:37.261 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 04:04:37.263 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 04:04:37.268 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 04:04:37.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:04:37.270 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:04:37.271 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 04:04:37.273 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:04:37.275 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 04:04:37.276 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:37.277 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 04:04:37.278 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:04:37.282 +07:00 [INF] Executed ViewResult - view Index executed in 4.9037ms.
2025-09-24 04:04:37.283 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 26.5202ms
2025-09-24 04:04:37.283 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 04:04:37.283 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 27.7468ms
2025-09-24 04:04:37.301 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 04:04:37.302 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.9274ms
2025-09-24 04:04:37.302 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 04:04:37.308 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:04:37.308 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3431ms
2025-09-24 04:04:37.308 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:04:37.309 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:04:37.309 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.8757ms
2025-09-24 04:04:37.309 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:04:37.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:04:37.310 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7084ms
2025-09-24 04:04:37.310 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:04:37.310 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4323ms
2025-09-24 04:04:37.310 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:04:37.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:04:37.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:04:37.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6544ms
2025-09-24 04:04:37.311 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.9641ms
2025-09-24 04:04:37.311 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:04:37.311 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:04:37.314 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:04:37.314 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:04:37.314 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:04:37.315 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.5828ms
2025-09-24 04:04:37.315 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.6982ms
2025-09-24 04:04:37.315 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4745ms
2025-09-24 04:04:37.315 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:04:37.315 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:04:37.315 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:04:48.261 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 04:04:48.261 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 04:04:48.261 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 04:04:48.263 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:04:48.263 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 04:04:48.265 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 04:04:48.265 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:04:48.267 +07:00 [INF] Executed ViewResult - view Index executed in 2.4048ms.
2025-09-24 04:04:48.267 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 6.2811ms
2025-09-24 04:04:48.268 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 04:04:48.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 7.2278ms
2025-09-24 04:04:48.290 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 04:04:48.291 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.9529ms
2025-09-24 04:04:48.291 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 04:04:48.294 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:04:48.294 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:04:48.294 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1873ms
2025-09-24 04:04:48.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.5273ms
2025-09-24 04:04:48.295 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:04:48.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:04:48.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:04:48.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:04:48.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4452ms
2025-09-24 04:04:48.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.5049ms
2025-09-24 04:04:48.295 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:04:48.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.3211ms
2025-09-24 04:04:48.295 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:04:48.296 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:04:48.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:04:48.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:04:48.297 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.4873ms
2025-09-24 04:04:48.297 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:04:48.298 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:04:48.298 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:04:48.298 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.6249ms
2025-09-24 04:04:48.298 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.7688ms
2025-09-24 04:04:48.298 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.3147ms
2025-09-24 04:04:48.298 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:04:48.298 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:04:48.298 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:04:49.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/books/3 - null null
2025-09-24 04:04:49.497 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Details (BookStoreMVC)'
2025-09-24 04:04:49.500 +07:00 [INF] Route matched with {action = "Details", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32, System.String) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 04:04:49.527 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Author], [s].[CategoryId], [s].[CreatedAt], [s].[Description], [s].[DiscountPrice], [s].[ImageContentType], [s].[ImageFileName], [s].[ImageFileSize], [s].[ImageUrl], [s].[IsActive], [s].[Language], [s].[PageCount], [s].[Price], [s].[PublishDate], [s].[Publisher], [s].[StockQuantity], [s].[Title], [s].[UpdatedAt], [s].[Id0], [s].[CreatedAt0], [s].[Description0], [s].[ImageUrl0], [s].[IsActive0], [s].[Name], [s].[ParentCategoryId], [s0].[Id], [s0].[BookId], [s0].[Comment], [s0].[CreatedAt], [s0].[IsApproved], [s0].[IsVerifiedPurchase], [s0].[Rating], [s0].[UserId], [s0].[Id0], [s0].[AccessFailedCount], [s0].[ConcurrencyStamp], [s0].[CreatedAt0], [s0].[Email], [s0].[EmailConfirmed], [s0].[LockoutEnabled], [s0].[LockoutEnd], [s0].[Name], [s0].[NormalizedEmail], [s0].[NormalizedUserName], [s0].[PasswordHash], [s0].[PhoneNumber], [s0].[PhoneNumberConfirmed], [s0].[SecurityStamp], [s0].[TwoFactorEnabled], [s0].[UserName]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id] AS [Id0], [c].[CreatedAt] AS [CreatedAt0], [c].[Description] AS [Description0], [c].[ImageUrl] AS [ImageUrl0], [c].[IsActive] AS [IsActive0], [c].[Name], [c].[ParentCategoryId]
    FROM [Books] AS [b]
    INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
    WHERE [b].[Id] = @__id_0 AND [b].[IsActive] = CAST(1 AS bit)
) AS [s]
LEFT JOIN (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt] AS [CreatedAt0], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [Reviews] AS [r]
    INNER JOIN [AspNetUsers] AS [a] ON [r].[UserId] = [a].[Id]
) AS [s0] ON [s].[Id] = [s0].[BookId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-09-24 04:04:49.556 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_2='?' (DbType = Int32), @__bookId_0='?' (DbType = Int32), @__book_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId]
FROM (
    SELECT TOP(@__p_2) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[Id] <> @__bookId_0 AND [b].[CategoryId] = @__book_CategoryId_1
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r0] ON [b0].[Id] = [r0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id]
2025-09-24 04:04:49.568 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [OrderItems] AS [o]
        INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
        WHERE [o0].[UserId] = @__userId_0 AND [o].[BookId] = @__bookId_1 AND [o0].[Status] = 3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 04:04:49.570 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [OrderItems] AS [o]
        INNER JOIN [Orders] AS [o0] ON [o].[OrderId] = [o0].[Id]
        WHERE [o0].[UserId] = @__userId_0 AND [o].[BookId] = @__bookId_1 AND [o0].[Status] = 3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 04:04:49.577 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reviews] AS [r]
        WHERE [r].[UserId] = @__userId_0 AND [r].[BookId] = @__bookId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 04:04:49.586 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [WishlistItems] AS [w]
        WHERE [w].[UserId] = @__userId_0 AND [w].[BookId] = @__bookId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 04:04:49.598 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450), @__bookId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[BookId], [c].[CreatedAt], [c].[Quantity], [c].[UpdatedAt], [c].[UserId]
FROM [CartItems] AS [c]
WHERE [c].[UserId] = @__userId_0 AND [c].[BookId] = @__bookId_1
2025-09-24 04:04:49.601 +07:00 [INF] Executing ViewResult, running view Details.
2025-09-24 04:04:49.623 +07:00 [INF] Executed ViewResult - view Details executed in 22.8717ms.
2025-09-24 04:04:49.623 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Details (BookStoreMVC) in 122.7346ms
2025-09-24 04:04:49.623 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Details (BookStoreMVC)'
2025-09-24 04:04:49.623 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/books/3 - 200 null text/html; charset=utf-8 127.2072ms
2025-09-24 04:04:49.653 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 04:04:49.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.1121ms
2025-09-24 04:04:49.654 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 04:04:49.660 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:04:49.660 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3273ms
2025-09-24 04:04:49.660 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:04:49.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:04:49.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:04:49.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:04:49.661 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4826ms
2025-09-24 04:04:49.661 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.4226ms
2025-09-24 04:04:49.661 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.6722ms
2025-09-24 04:04:49.661 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:04:49.661 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:04:49.661 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:04:49.661 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.6106ms
2025-09-24 04:04:49.662 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:04:49.662 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:04:49.663 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.9558ms
2025-09-24 04:04:49.663 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:04:49.666 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:04:49.666 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:04:49.666 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:04:49.667 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4899ms
2025-09-24 04:04:49.667 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.9065ms
2025-09-24 04:04:49.667 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:04:49.667 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:04:49.667 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.6791ms
2025-09-24 04:04:49.667 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:09:25.353 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:09:25.354 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:09:25.354 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:09:25.356 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:09:25.357 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:09:25.357 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:09:25.362 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:09:25.363 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:09:25.365 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:09:25.366 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:09:25.367 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:09:25.368 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:09:25.369 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:09:25.370 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:09:25.371 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:09:25.373 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:09:25.374 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:09:25.375 +07:00 [INF] Executed ViewResult - view Dashboard executed in 0.8791ms.
2025-09-24 04:09:25.375 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 20.4367ms
2025-09-24 04:09:25.375 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:09:25.375 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 21.4708ms
2025-09-24 04:09:25.400 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 04:09:25.402 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.5411ms
2025-09-24 04:09:25.402 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 04:09:25.404 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 04:09:25.405 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.8649ms
2025-09-24 04:09:25.405 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 04:09:25.470 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:09:25.470 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1481ms
2025-09-24 04:12:35.195 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/orders?area=Admin - null null
2025-09-24 04:12:35.196 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.OrdersController.Index (BookStoreMVC)'
2025-09-24 04:12:35.200 +07:00 [INF] Route matched with {action = "Index", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.OrderListViewModel) on controller BookStoreMVC.Controllers.OrdersController (BookStoreMVC).
2025-09-24 04:12:36.760 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-09-24 04:12:36.790 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[Discount], [o0].[PaymentId], [o0].[ShippingInfoId], [o0].[Status], [o0].[SubTotal], [o0].[Tax], [o0].[Total], [o0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [s].[Id], [s].[Address], [s].[City], [s].[Country], [s].[FirstName], [s].[LastName], [s].[Phone], [s].[PostalCode], [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[Method], [p].[OrderId], [p].[Status], [p].[TransactionId], [s0].[Id], [s0].[BookId], [s0].[OrderId], [s0].[Quantity], [s0].[Total], [s0].[UnitPrice], [s0].[Id0], [s0].[Author], [s0].[CategoryId], [s0].[CreatedAt], [s0].[Description], [s0].[DiscountPrice], [s0].[ImageContentType], [s0].[ImageFileName], [s0].[ImageFileSize], [s0].[ImageUrl], [s0].[IsActive], [s0].[Language], [s0].[PageCount], [s0].[Price], [s0].[PublishDate], [s0].[Publisher], [s0].[StockQuantity], [s0].[Title], [s0].[UpdatedAt]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
INNER JOIN [ShippingInfos] AS [s] ON [o0].[ShippingInfoId] = [s].[Id]
LEFT JOIN [Payments] AS [p] ON [o0].[Id] = [p].[OrderId]
LEFT JOIN (
    SELECT [o1].[Id], [o1].[BookId], [o1].[OrderId], [o1].[Quantity], [o1].[Total], [o1].[UnitPrice], [b].[Id] AS [Id0], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [OrderItems] AS [o1]
    LEFT JOIN [Books] AS [b] ON [o1].[BookId] = [b].[Id]
) AS [s0] ON [o0].[Id] = [s0].[OrderId]
ORDER BY [o0].[CreatedAt] DESC, [o0].[Id], [a].[Id], [s].[Id], [p].[Id], [s0].[Id]
2025-09-24 04:12:36.794 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:12:36.812 +07:00 [INF] Executed ViewResult - view Index executed in 19.1424ms.
2025-09-24 04:12:36.812 +07:00 [INF] Executed action BookStoreMVC.Controllers.OrdersController.Index (BookStoreMVC) in 1612.1352ms
2025-09-24 04:12:36.813 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.OrdersController.Index (BookStoreMVC)'
2025-09-24 04:12:36.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/orders?area=Admin - 200 null text/html; charset=utf-8 1617.4428ms
2025-09-24 04:12:36.833 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:12:36.834 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.7557ms
2025-09-24 04:12:36.834 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:12:36.841 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:12:36.842 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:12:36.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2994ms
2025-09-24 04:12:36.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 2.2238ms
2025-09-24 04:12:36.843 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:12:36.844 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:12:36.844 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:12:36.845 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.5315ms
2025-09-24 04:12:36.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:12:36.845 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:12:36.845 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.7196ms
2025-09-24 04:12:36.845 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:12:36.845 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6174ms
2025-09-24 04:12:36.846 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:12:36.848 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:12:36.848 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:12:36.848 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:12:36.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8852ms
2025-09-24 04:12:36.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.9483ms
2025-09-24 04:12:36.849 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:12:36.849 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:12:36.849 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.9596ms
2025-09-24 04:12:36.849 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:12:38.604 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:12:38.604 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:12:38.604 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:12:38.605 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:12:38.606 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:12:38.606 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:12:38.607 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:12:38.608 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:12:38.609 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:12:38.610 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:12:38.612 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:12:38.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:12:38.615 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:12:38.616 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:12:38.617 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:12:38.619 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:12:38.620 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:12:38.620 +07:00 [INF] Executed ViewResult - view Dashboard executed in 0.9173ms.
2025-09-24 04:12:38.621 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 16.197ms
2025-09-24 04:12:38.621 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:12:38.621 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 17.0289ms
2025-09-24 04:12:38.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:12:38.657 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.218ms
2025-09-24 04:12:41.280 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/orders/Pending?area=Admin - null null
2025-09-24 04:12:41.280 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/orders/Pending?area=Admin - 404 0 null 0.3876ms
2025-09-24 04:12:41.280 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/orders/Pending, Response status code: 404
2025-09-24 04:12:42.468 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:12:42.469 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:12:42.469 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:12:42.470 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:12:42.470 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:12:42.471 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:12:42.471 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:12:42.472 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:12:42.472 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:12:42.473 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:12:42.473 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:12:42.474 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:12:42.475 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:12:42.477 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:12:42.478 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:12:42.479 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:12:42.479 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:12:42.481 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.681ms.
2025-09-24 04:12:42.481 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 12.274ms
2025-09-24 04:12:42.481 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:12:42.481 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 13.1543ms
2025-09-24 04:12:42.525 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:12:42.525 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1125ms
2025-09-24 04:12:44.201 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/orders?area=Admin - null null
2025-09-24 04:12:44.202 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.OrdersController.Index (BookStoreMVC)'
2025-09-24 04:12:44.202 +07:00 [INF] Route matched with {action = "Index", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.OrderListViewModel) on controller BookStoreMVC.Controllers.OrdersController (BookStoreMVC).
2025-09-24 04:12:44.203 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[UserId] = @__userId_0
2025-09-24 04:12:44.204 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[CreatedAt], [o0].[Discount], [o0].[PaymentId], [o0].[ShippingInfoId], [o0].[Status], [o0].[SubTotal], [o0].[Tax], [o0].[Total], [o0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [s].[Id], [s].[Address], [s].[City], [s].[Country], [s].[FirstName], [s].[LastName], [s].[Phone], [s].[PostalCode], [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[Method], [p].[OrderId], [p].[Status], [p].[TransactionId], [s0].[Id], [s0].[BookId], [s0].[OrderId], [s0].[Quantity], [s0].[Total], [s0].[UnitPrice], [s0].[Id0], [s0].[Author], [s0].[CategoryId], [s0].[CreatedAt], [s0].[Description], [s0].[DiscountPrice], [s0].[ImageContentType], [s0].[ImageFileName], [s0].[ImageFileSize], [s0].[ImageUrl], [s0].[IsActive], [s0].[Language], [s0].[PageCount], [s0].[Price], [s0].[PublishDate], [s0].[Publisher], [s0].[StockQuantity], [s0].[Title], [s0].[UpdatedAt]
FROM (
    SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY [o].[CreatedAt] DESC
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
INNER JOIN [ShippingInfos] AS [s] ON [o0].[ShippingInfoId] = [s].[Id]
LEFT JOIN [Payments] AS [p] ON [o0].[Id] = [p].[OrderId]
LEFT JOIN (
    SELECT [o1].[Id], [o1].[BookId], [o1].[OrderId], [o1].[Quantity], [o1].[Total], [o1].[UnitPrice], [b].[Id] AS [Id0], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [OrderItems] AS [o1]
    LEFT JOIN [Books] AS [b] ON [o1].[BookId] = [b].[Id]
) AS [s0] ON [o0].[Id] = [s0].[OrderId]
ORDER BY [o0].[CreatedAt] DESC, [o0].[Id], [a].[Id], [s].[Id], [p].[Id], [s0].[Id]
2025-09-24 04:12:44.204 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 04:12:44.207 +07:00 [INF] Executed ViewResult - view Index executed in 2.3258ms.
2025-09-24 04:12:44.207 +07:00 [INF] Executed action BookStoreMVC.Controllers.OrdersController.Index (BookStoreMVC) in 4.8539ms
2025-09-24 04:12:44.207 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.OrdersController.Index (BookStoreMVC)'
2025-09-24 04:12:44.207 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/orders?area=Admin - 200 null text/html; charset=utf-8 5.4794ms
2025-09-24 04:12:44.231 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 04:12:44.232 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.6155ms
2025-09-24 04:12:44.232 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 04:12:44.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 04:12:44.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 04:12:44.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:12:44.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 04:12:44.241 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1453ms
2025-09-24 04:12:44.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 04:12:44.241 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.5937ms
2025-09-24 04:12:44.241 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.4922ms
2025-09-24 04:12:44.241 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 04:12:44.241 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 04:12:44.241 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.4026ms
2025-09-24 04:12:44.241 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.2308ms
2025-09-24 04:12:44.241 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 04:12:44.241 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 04:12:44.243 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 04:12:44.244 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 04:12:44.244 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 04:12:44.244 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.8628ms
2025-09-24 04:12:44.244 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.4768ms
2025-09-24 04:12:44.244 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 04:12:44.244 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.4812ms
2025-09-24 04:12:44.244 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 04:12:44.244 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 04:13:51.285 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:13:51.286 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:13:51.286 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:13:51.288 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:13:51.289 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:13:51.289 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:13:51.290 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:13:51.292 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:13:51.293 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:13:51.294 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:13:51.295 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:13:51.296 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:13:51.297 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:13:51.299 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:13:51.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:13:51.305 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:13:51.307 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:13:51.308 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.1257ms.
2025-09-24 04:13:51.308 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 21.2057ms
2025-09-24 04:13:51.308 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:13:51.308 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 22.4391ms
2025-09-24 04:13:51.342 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:13:51.342 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.4276ms
2025-09-24 04:13:54.855 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetOrderStatusData - null null
2025-09-24 04:13:55.807 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetOrderStatusData - 404 0 null 951.7005ms
2025-09-24 04:13:55.807 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetOrderStatusData, Response status code: 404
2025-09-24 04:13:55.808 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetOrderStatusData - null null
2025-09-24 04:13:55.808 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetOrderStatusData - 404 0 null 0.3974ms
2025-09-24 04:13:55.809 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetOrderStatusData, Response status code: 404
2025-09-24 04:13:57.469 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/GetOrderStatusData - null null
2025-09-24 04:13:57.470 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/GetOrderStatusData - 404 0 null 0.474ms
2025-09-24 04:13:57.470 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Admin/GetOrderStatusData, Response status code: 404
2025-09-24 04:14:06.910 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/books/create - null null
2025-09-24 04:14:06.911 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC)'
2025-09-24 04:14:06.913 +07:00 [INF] Route matched with {action = "CreateBook", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:14:06.915 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 04:14:06.918 +07:00 [INF] Executing ViewResult, running view CreateBook.
2025-09-24 04:14:06.921 +07:00 [ERR] The view 'CreateBook' was not found. Searched locations: ["/Views/Admin/CreateBook.cshtml","/Views/Shared/CreateBook.cshtml"]
2025-09-24 04:14:06.922 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC) in 9.5345ms
2025-09-24 04:14:06.922 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC)'
2025-09-24 04:14:06.923 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'CreateBook' was not found. The following locations were searched:
/Views/Admin/CreateBook.cshtml
/Views/Shared/CreateBook.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 04:14:06.924 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/books/create - 500 null text/html; charset=utf-8 14.4323ms
2025-09-24 04:14:06.949 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:14:06.950 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2307ms
2025-09-24 04:14:07.838 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:14:07.839 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:14:07.839 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:14:07.839 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:14:07.840 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:14:07.840 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:14:07.841 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:14:07.841 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:14:07.842 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:14:07.842 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:14:07.843 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:14:07.844 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:14:07.847 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:14:07.849 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:14:07.850 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:14:07.852 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:14:07.852 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:14:07.854 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.3196ms.
2025-09-24 04:14:07.854 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 15.1067ms
2025-09-24 04:14:07.854 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:14:07.854 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 16.4926ms
2025-09-24 04:14:07.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:14:07.877 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2231ms
2025-09-24 04:19:08.355 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:19:08.367 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-09-24 04:19:08.391 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-09-24 04:19:08.407 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-24 04:19:08.411 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 04:19:08.417 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-09-24 04:19:08.420 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:19:08.420 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:19:08.421 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:19:08.421 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:19:08.422 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:19:08.423 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:19:08.424 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:19:08.424 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:19:08.425 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:19:08.426 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:19:08.427 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:19:08.427 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:19:08.428 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:19:08.430 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:19:08.431 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:19:08.432 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:19:08.435 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.9716ms.
2025-09-24 04:19:08.435 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 14.9896ms
2025-09-24 04:19:08.435 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:19:08.435 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 80.4141ms
2025-09-24 04:19:08.451 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 04:19:08.451 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 0.6578ms
2025-09-24 04:19:08.451 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 04:19:08.453 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 04:19:08.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.6321ms
2025-09-24 04:19:08.454 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 04:19:08.518 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:19:08.518 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1382ms
2025-09-24 04:24:09.351 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 04:24:09.351 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:24:09.351 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 04:24:09.406 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 04:24:09.408 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 04:24:09.409 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 04:24:09.410 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 04:24:09.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 04:24:09.413 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 04:24:09.416 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 04:24:09.419 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 04:24:09.421 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 04:24:09.424 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 04:24:09.426 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 04:24:09.428 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 04:24:09.429 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 04:24:09.430 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 04:24:09.432 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.3784ms.
2025-09-24 04:24:09.433 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 81.2098ms
2025-09-24 04:24:09.433 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 04:24:09.433 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 82.6443ms
2025-09-24 04:24:09.449 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 04:24:09.450 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.4198ms
2025-09-24 04:24:09.451 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 04:24:09.453 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 04:24:09.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.0165ms
2025-09-24 04:24:09.454 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 04:24:09.470 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 04:24:09.470 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.178ms
2025-09-24 07:43:07.054 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-24 07:43:08.901 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:43:08.914 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 07:43:08.939 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 07:43:08.989 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 07:43:09.001 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:43:09.003 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 07:43:09.010 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 07:43:09.021 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 07:43:09.027 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 07:43:09.216 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:43:09.252 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:43:09.364 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:43:09.408 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:43:09.416 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:43:09.420 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:43:09.422 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:43:09.426 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:43:09.430 +07:00 [INF] Database initialization completed successfully.
2025-09-24 07:43:09.540 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:43:09.542 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 07:43:09.543 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 07:43:09.547 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 07:43:09.551 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:43:09.554 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 07:43:09.556 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 07:43:09.557 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 07:43:09.559 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 07:43:09.561 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:43:09.564 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:43:09.566 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:43:09.571 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:43:09.573 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:43:09.577 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:43:09.579 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:43:09.583 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:43:09.585 +07:00 [INF] Database initialization completed successfully.
2025-09-24 07:43:09.587 +07:00 [INF] BookStore application starting up...
2025-09-24 07:43:09.672 +07:00 [INF] Now listening on: http://localhost:5232
2025-09-24 07:43:09.673 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-24 07:43:09.674 +07:00 [INF] Hosting environment: Development
2025-09-24 07:43:09.674 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-09-24 07:43:11.070 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 07:43:11.165 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-24 07:43:11.211 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:43:11.225 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 07:43:11.393 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:43:11.502 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:43:11.517 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 07:43:11.554 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 07:43:11.568 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:43:11.579 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:43:11.592 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:43:11.604 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:43:11.630 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:43:11.647 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 07:43:11.692 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 07:43:11.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:43:11.723 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:43:11.765 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:43:11.903 +07:00 [INF] Executed ViewResult - view Index executed in 138.493ms.
2025-09-24 07:43:11.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/css/output.css?v=YR0oZDuEY6GJkDXELbFPrMV0WcQ3SauY9qTKxDcI2S4 - null null
2025-09-24 07:43:11.909 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 681.32ms
2025-09-24 07:43:11.912 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:43:11.912 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:43:11.912 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:43:11.913 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:43:11.914 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:43:11.918 +07:00 [INF] The file /css/output.css was not modified
2025-09-24 07:43:11.925 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 12.208ms
2025-09-24 07:43:11.925 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 12.1984ms
2025-09-24 07:43:11.927 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 14.6494ms
2025-09-24 07:43:11.927 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 14.1836ms
2025-09-24 07:43:11.930 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/css/output.css?v=YR0oZDuEY6GJkDXELbFPrMV0WcQ3SauY9qTKxDcI2S4 - 304 null text/css 21.4693ms
2025-09-24 07:43:11.934 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 866.1335ms
2025-09-24 07:43:11.934 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:43:11.937 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:43:11.940 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:43:11.943 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:43:11.947 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:43:11.950 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:43:11.952 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:43:11.954 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/site.js?v=ZXp-KKengpsH6WmJm6Jx0S24LuE3sZ1PUD1PsWxDP5I - null null
2025-09-24 07:43:11.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:43:11.960 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:43:11.966 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 19.0143ms
2025-09-24 07:43:11.966 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 16.1345ms
2025-09-24 07:43:11.968 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 16.9203ms
2025-09-24 07:43:11.971 +07:00 [INF] The file /js/site.js was not modified
2025-09-24 07:43:11.974 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 17.3975ms
2025-09-24 07:43:11.976 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 16.2435ms
2025-09-24 07:43:11.979 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:43:11.982 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:43:11.984 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:43:11.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/site.js?v=ZXp-KKengpsH6WmJm6Jx0S24LuE3sZ1PUD1PsWxDP5I - 304 null text/javascript 32.1255ms
2025-09-24 07:43:11.988 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:43:11.991 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:43:23.771 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:43:23.776 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-09-24 07:43:23.782 +07:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2025-09-24 07:43:23.783 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 302 0 null 12.4535ms
2025-09-24 07:43:23.787 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Account/Login?ReturnUrl=%2FAdmin - null null
2025-09-24 07:43:23.792 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 07:43:23.799 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-09-24 07:43:23.815 +07:00 [INF] Executing ViewResult, running view Login.
2025-09-24 07:43:24.062 +07:00 [INF] Executed ViewResult - view Login executed in 247.6798ms.
2025-09-24 07:43:24.063 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 262.2547ms
2025-09-24 07:43:24.064 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 07:43:24.064 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Account/Login?ReturnUrl=%2FAdmin - 200 null text/html; charset=utf-8 277.2251ms
2025-09-24 07:43:24.082 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/css/output.css - null null
2025-09-24 07:43:24.085 +07:00 [INF] The file /css/output.css was not modified
2025-09-24 07:43:24.085 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:43:24.085 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:43:24.085 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:43:24.085 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:43:24.085 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:43:24.086 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/css/output.css - 304 null text/css 3.7727ms
2025-09-24 07:43:24.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 3.6057ms
2025-09-24 07:43:24.092 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 6.7143ms
2025-09-24 07:43:24.095 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 9.743ms
2025-09-24 07:43:24.097 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 11.4648ms
2025-09-24 07:43:24.100 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 15.2146ms
2025-09-24 07:43:24.103 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - null null
2025-09-24 07:43:24.105 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:43:24.106 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:43:24.109 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:43:24.111 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:43:24.113 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:43:24.118 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/bookverse-core.js - 404 0 null 15.8039ms
2025-09-24 07:43:24.122 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - null null
2025-09-24 07:43:24.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/login.js?v=5_yFtJP0kybVWGRgPOeI8tFeD4mu70Hwg3BRWviBUds - null null
2025-09-24 07:43:24.124 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:43:24.126 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:43:24.127 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:43:24.130 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/bookverse-core.js, Response status code: 404
2025-09-24 07:43:24.133 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/auth-validation.js - 404 0 null 11.4733ms
2025-09-24 07:43:24.135 +07:00 [INF] The file /js/login.js was not modified
2025-09-24 07:43:24.138 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 13.69ms
2025-09-24 07:43:24.141 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 14.8604ms
2025-09-24 07:43:24.144 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 16.5146ms
2025-09-24 07:43:24.148 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/auth-validation.js, Response status code: 404
2025-09-24 07:43:24.149 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/login.js?v=5_yFtJP0kybVWGRgPOeI8tFeD4mu70Hwg3BRWviBUds - 304 null text/javascript 25.3911ms
2025-09-24 07:43:24.151 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:43:24.153 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:43:24.156 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:43:26.623 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5232/account/Login - application/x-www-form-urlencoded 267
2025-09-24 07:43:26.627 +07:00 [INF] CORS policy execution failed.
2025-09-24 07:43:26.628 +07:00 [INF] Request origin http://localhost:5232 does not have permission to access the resource.
2025-09-24 07:43:26.633 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 07:43:26.642 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookStoreMVC.Models.ViewModels.LoginViewModel, System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-09-24 07:43:26.680 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-09-24 07:43:26.840 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-09-24 07:43:26.858 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-09-24 07:43:26.862 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:43:26.872 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2025-09-24 07:43:26.881 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-09-24 07:43:26.885 +07:00 [INF] User logged in.
2025-09-24 07:43:26.886 +07:00 [INF] Executing LocalRedirectResult, redirecting to /Admin.
2025-09-24 07:43:26.887 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 242.4226ms
2025-09-24 07:43:26.888 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 07:43:26.890 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5232/account/Login - 302 0 null 267.0831ms
2025-09-24 07:43:26.895 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:43:26.901 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:43:26.904 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:43:26.912 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:43:26.918 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:43:26.924 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:43:26.929 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:43:26.933 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:43:26.939 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:43:26.945 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:43:26.950 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:43:26.966 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:43:26.982 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:43:26.991 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:43:26.995 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-09-24 07:43:27.002 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:43:27.030 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 07:43:27.079 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:43:27.146 +07:00 [INF] Executed ViewResult - view Dashboard executed in 67.5126ms.
2025-09-24 07:43:27.148 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 240.8275ms
2025-09-24 07:43:27.149 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:43:27.149 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 254.4943ms
2025-09-24 07:43:27.165 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:43:27.168 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 3.5395ms
2025-09-24 07:43:27.171 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:43:27.183 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:43:27.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 10.976ms
2025-09-24 07:43:27.197 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:43:32.768 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 07:43:32.770 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:43:32.789 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 07:43:32.802 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:43:32.804 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:43:32.808 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:43:32.811 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:43:32.834 +07:00 [INF] Executed ViewResult - view Index executed in 23.7424ms.
2025-09-24 07:43:32.835 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 45.1854ms
2025-09-24 07:43:32.836 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:43:32.837 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 69.3986ms
2025-09-24 07:43:32.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:43:32.856 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 3.3779ms
2025-09-24 07:43:32.859 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:43:32.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:43:32.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:43:32.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:43:32.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:43:32.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:43:32.862 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:43:32.864 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 4.9978ms
2025-09-24 07:43:32.866 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 6.982ms
2025-09-24 07:43:32.869 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 9.5513ms
2025-09-24 07:43:32.871 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 11.6524ms
2025-09-24 07:43:32.874 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 14.8811ms
2025-09-24 07:43:32.877 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 15.2067ms
2025-09-24 07:43:32.879 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:43:32.881 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:43:32.884 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:43:32.886 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:43:32.889 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:43:32.891 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:43:32.894 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:43:32.895 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:43:32.901 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 7.3045ms
2025-09-24 07:43:32.903 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 8.1117ms
2025-09-24 07:43:32.906 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:43:32.908 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:43:35.195 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Account/Login?ReturnUrl=%2FAdmin - null null
2025-09-24 07:43:35.197 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 07:43:35.198 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller BookStoreMVC.Controllers.AccountController (BookStoreMVC).
2025-09-24 07:43:35.201 +07:00 [INF] Executing RedirectResult, redirecting to /.
2025-09-24 07:43:35.202 +07:00 [INF] Executed action BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC) in 2.745ms
2025-09-24 07:43:35.203 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AccountController.Login (BookStoreMVC)'
2025-09-24 07:43:35.204 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Account/Login?ReturnUrl=%2FAdmin - 302 0 null 9.2874ms
2025-09-24 07:43:35.208 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 07:43:35.209 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:43:35.210 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 07:43:35.214 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:43:35.217 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:43:35.219 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 07:43:35.223 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:43:35.226 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:43:35.229 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:43:35.230 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:43:35.232 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:43:35.235 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 07:43:35.237 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:43:35.240 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:43:35.243 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:43:35.246 +07:00 [INF] Executed ViewResult - view Index executed in 3.2494ms.
2025-09-24 07:43:35.247 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 35.8346ms
2025-09-24 07:43:35.248 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:43:35.249 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 41.2185ms
2025-09-24 07:43:39.822 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:39.825 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 2.9857ms
2025-09-24 07:43:39.827 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:41.024 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:41.029 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 4.6898ms
2025-09-24 07:43:41.032 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:41.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:41.477 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 3.4528ms
2025-09-24 07:43:41.480 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:41.868 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:41.872 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 3.7828ms
2025-09-24 07:43:41.875 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:42.338 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:42.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 2.6797ms
2025-09-24 07:43:42.343 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:43.738 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:43.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 2.3287ms
2025-09-24 07:43:43.743 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:44.124 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:44.127 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 2.9571ms
2025-09-24 07:43:44.129 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:45.900 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:45.904 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 3.1424ms
2025-09-24 07:43:45.906 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:46.308 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:46.310 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 2.565ms
2025-09-24 07:43:46.312 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:43:46.804 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:43:46.806 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 2.8435ms
2025-09-24 07:43:46.809 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:44:28.981 +07:00 [INF] Application is shutting down...
2025-09-24 07:44:43.973 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-24 07:44:44.688 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:44:44.699 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 07:44:44.723 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 07:44:44.772 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 07:44:44.783 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:44:44.784 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 07:44:44.789 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 07:44:44.801 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 07:44:44.805 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 07:44:44.989 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:44:45.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:44:45.040 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:44:45.081 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:44:45.087 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:44:45.089 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:44:45.091 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:44:45.092 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:44:45.095 +07:00 [INF] Database initialization completed successfully.
2025-09-24 07:44:45.189 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:44:45.189 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 07:44:45.190 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 07:44:45.193 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 07:44:45.195 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:44:45.196 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 07:44:45.196 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 07:44:45.197 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 07:44:45.197 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 07:44:45.198 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:44:45.199 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:44:45.200 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:44:45.201 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:44:45.202 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:44:45.204 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:44:45.206 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:44:45.208 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:44:45.208 +07:00 [INF] Database initialization completed successfully.
2025-09-24 07:44:45.209 +07:00 [INF] BookStore application starting up...
2025-09-24 07:44:45.263 +07:00 [INF] Now listening on: http://localhost:5232
2025-09-24 07:44:45.263 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-24 07:44:45.263 +07:00 [INF] Hosting environment: Development
2025-09-24 07:44:45.263 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-09-24 07:44:45.475 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 07:44:45.481 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-24 07:44:45.534 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:44:45.546 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 07:44:45.777 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:44:45.883 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:44:45.902 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 07:44:45.938 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 07:44:45.960 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:44:45.984 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:44:46.017 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:44:46.037 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:44:46.067 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:44:46.086 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 07:44:46.106 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 07:44:46.153 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:44:46.175 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:44:46.214 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:44:46.369 +07:00 [INF] Executed ViewResult - view Index executed in 156.9553ms.
2025-09-24 07:44:46.373 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 826.3182ms
2025-09-24 07:44:46.374 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:44:46.382 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 907.9159ms
2025-09-24 07:44:46.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:44:46.387 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:44:46.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:44:46.391 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:44:46.393 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:44:46.393 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:44:46.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 3.8689ms
2025-09-24 07:44:46.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 9.7607ms
2025-09-24 07:44:46.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 7.5621ms
2025-09-24 07:44:46.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 3.5304ms
2025-09-24 07:44:46.395 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:44:46.396 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:44:46.395 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:44:46.396 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:44:46.403 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:44:46.405 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:44:46.405 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:44:46.405 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:44:46.406 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 2.8181ms
2025-09-24 07:44:46.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 8.2568ms
2025-09-24 07:44:46.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 19.8609ms
2025-09-24 07:44:46.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 7.8333ms
2025-09-24 07:44:46.413 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:44:46.413 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:44:46.413 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:44:46.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 19.6172ms
2025-09-24 07:44:46.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 7.6894ms
2025-09-24 07:44:46.414 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:44:46.414 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:45:13.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:45:13.441 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:45:13.448 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:45:13.776 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:45:13.781 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:45:13.785 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:45:13.790 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:45:13.792 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:45:13.797 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:45:13.802 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:45:13.808 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:45:13.826 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:45:13.840 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:45:13.848 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:45:13.853 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-09-24 07:45:13.860 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:45:13.887 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 07:45:13.934 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:45:14.009 +07:00 [INF] Executed ViewResult - view Dashboard executed in 90.4425ms.
2025-09-24 07:45:14.010 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 561.6117ms
2025-09-24 07:45:14.010 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:45:14.010 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 575.0588ms
2025-09-24 07:45:14.029 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:45:14.031 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.6802ms
2025-09-24 07:45:14.031 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:45:14.039 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:45:14.039 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:45:14.040 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.7019ms
2025-09-24 07:45:14.041 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.7532ms
2025-09-24 07:45:14.041 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:45:14.181 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:45:14.183 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:45:14.186 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:45:14.193 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:45:14.195 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:45:14.197 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:45:14.209 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:45:14.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:45:14.232 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:45:14.236 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:45:14.237 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:45:14.246 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:45:14.248 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:45:14.267 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 80.7562ms
2025-09-24 07:45:14.267 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:45:14.267 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 86.3543ms
2025-09-24 07:45:23.684 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 07:45:23.685 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:45:23.707 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 07:45:23.722 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:45:23.723 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:45:23.726 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:45:23.729 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:45:23.753 +07:00 [INF] Executed ViewResult - view Index executed in 24.694ms.
2025-09-24 07:45:23.753 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 46.0913ms
2025-09-24 07:45:23.753 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:45:23.754 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 69.3788ms
2025-09-24 07:45:23.776 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:45:23.778 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 2.0541ms
2025-09-24 07:45:23.778 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:45:23.781 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:45:23.781 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:45:23.781 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3872ms
2025-09-24 07:45:23.781 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:45:23.782 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:45:23.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.2955ms
2025-09-24 07:45:23.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.6927ms
2025-09-24 07:45:23.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.0672ms
2025-09-24 07:45:23.783 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:45:23.783 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:45:23.783 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:45:23.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:45:23.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:45:23.784 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.1096ms
2025-09-24 07:45:23.784 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.1083ms
2025-09-24 07:45:23.784 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:45:23.784 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:45:23.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:45:23.787 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.6171ms
2025-09-24 07:45:23.788 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:45:23.788 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:45:23.788 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:45:23.789 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.1366ms
2025-09-24 07:45:23.789 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.089ms
2025-09-24 07:45:23.789 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:45:23.789 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:45:30.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:45:30.389 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:45:30.389 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:45:30.393 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:45:30.394 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:45:30.394 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:45:30.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:45:30.397 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:45:30.398 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:45:30.399 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:45:30.400 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:45:30.401 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:45:30.402 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:45:30.404 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:45:30.405 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:45:30.406 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 07:45:30.408 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:45:30.411 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.9378ms.
2025-09-24 07:45:30.411 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 21.3461ms
2025-09-24 07:45:30.411 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:45:30.411 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 24.5858ms
2025-09-24 07:45:30.438 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:45:30.439 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2993ms
2025-09-24 07:45:32.665 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:45:32.666 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 0.8043ms
2025-09-24 07:45:32.666 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:46:24.195 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:46:24.196 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:46:24.197 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:46:24.198 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:46:24.199 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:46:24.200 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:46:24.201 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:46:24.202 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:46:24.203 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:46:24.204 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:46:24.205 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:46:24.206 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:46:24.206 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:46:24.207 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:46:24.208 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:46:24.210 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 07:46:24.211 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:46:24.213 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.1517ms.
2025-09-24 07:46:24.213 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 16.4662ms
2025-09-24 07:46:24.213 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:46:24.214 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 18.1508ms
2025-09-24 07:46:24.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:46:24.252 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1992ms
2025-09-24 07:46:27.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:46:27.643 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.9836ms
2025-09-24 07:46:27.643 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:47:28.961 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:47:28.962 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:47:28.962 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:47:28.963 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:47:28.964 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:47:28.964 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:47:28.965 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:47:28.966 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:47:28.968 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:47:28.969 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:47:28.969 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:47:28.970 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:47:28.972 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:47:28.973 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:47:28.975 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:47:28.976 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 07:47:28.977 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:47:28.980 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.7407ms.
2025-09-24 07:47:28.980 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 17.9659ms
2025-09-24 07:47:28.980 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:47:28.981 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 19.7906ms
2025-09-24 07:47:29.010 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:47:29.012 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.4904ms
2025-09-24 07:47:29.012 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:47:29.013 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:47:29.015 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.3997ms
2025-09-24 07:47:29.015 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:47:29.024 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:47:29.025 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.3746ms
2025-09-24 07:47:29.025 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:47:29.071 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:47:29.071 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2172ms
2025-09-24 07:47:29.297 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:47:29.300 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:47:29.301 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:47:29.307 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:47:29.310 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:47:29.312 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:47:29.314 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:47:29.316 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:47:29.318 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:47:29.319 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:47:29.320 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:47:29.321 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:47:29.321 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:47:29.322 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 21.4913ms
2025-09-24 07:47:29.323 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:47:29.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 28.3798ms
2025-09-24 07:48:42.735 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:48:42.736 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:48:42.736 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:48:42.737 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:48:42.738 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:48:42.739 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:48:42.739 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:48:42.740 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:48:42.742 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:48:42.743 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:48:42.744 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:48:42.745 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:48:42.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:48:42.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:48:42.751 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:48:42.754 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 07:48:42.755 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:48:42.758 +07:00 [INF] Executed ViewResult - view Dashboard executed in 3.1686ms.
2025-09-24 07:48:42.758 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 21.4942ms
2025-09-24 07:48:42.758 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:48:42.758 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 22.9106ms
2025-09-24 07:48:42.791 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:48:42.792 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 0.9159ms
2025-09-24 07:48:42.792 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:48:42.794 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:48:42.794 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:48:42.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 0.8259ms
2025-09-24 07:48:42.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.0998ms
2025-09-24 07:48:42.795 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:48:42.795 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:48:42.801 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:48:42.801 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2413ms
2025-09-24 07:48:42.967 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:48:42.968 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:48:42.968 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:48:42.972 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:48:42.973 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:48:42.974 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:48:42.975 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:48:42.977 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:48:42.978 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:48:42.980 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:48:42.981 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:48:42.982 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:48:42.982 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:48:42.983 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 14.8821ms
2025-09-24 07:48:42.983 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:48:42.984 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 16.8353ms
2025-09-24 07:49:10.302 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:10.303 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:10.306 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:10.308 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:10.309 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:10.311 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:10.312 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:10.314 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:10.315 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:10.317 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:10.318 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:10.321 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:10.324 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:10.326 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:10.328 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:10.330 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:10.331 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:10.342 +07:00 [INF] Executed ViewResult - view Dashboard executed in 11.9466ms.
2025-09-24 07:49:10.342 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 36.4088ms
2025-09-24 07:49:10.342 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:10.343 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 40.8218ms
2025-09-24 07:49:10.365 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:49:10.365 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:10.368 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 2.9788ms
2025-09-24 07:49:10.368 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:10.368 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 3.0558ms
2025-09-24 07:49:10.368 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:49:10.377 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:49:10.377 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:10.377 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2549ms
2025-09-24 07:49:10.379 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:49:10.380 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:49:10.380 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 2.9659ms
2025-09-24 07:49:10.380 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:49:10.380 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.0995ms
2025-09-24 07:49:10.380 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.8446ms
2025-09-24 07:49:10.381 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:49:10.381 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:49:10.381 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:49:10.382 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.4378ms
2025-09-24 07:49:10.383 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:49:10.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:49:10.385 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:49:10.386 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.1738ms
2025-09-24 07:49:10.386 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8379ms
2025-09-24 07:49:10.386 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:49:10.386 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:49:10.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:49:10.387 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.8577ms
2025-09-24 07:49:10.387 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:49:10.765 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:10.775 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:10.775 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:10.780 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:10.785 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:10.786 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:10.787 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:10.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:10.790 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:10.791 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:10.791 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:10.793 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:10.794 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:10.796 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:10.797 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:10.800 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:10.801 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:10.803 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.4966ms.
2025-09-24 07:49:10.803 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 27.85ms
2025-09-24 07:49:10.803 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:10.804 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 39.5096ms
2025-09-24 07:49:10.831 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:49:10.833 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 2.1731ms
2025-09-24 07:49:10.833 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:49:10.835 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:10.835 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2049ms
2025-09-24 07:49:10.835 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:49:10.837 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.4053ms
2025-09-24 07:49:10.837 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:49:10.837 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:49:10.838 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.9888ms
2025-09-24 07:49:10.839 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:49:10.839 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:49:10.840 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.7565ms
2025-09-24 07:49:10.840 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:49:10.840 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:49:10.841 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.9594ms
2025-09-24 07:49:10.841 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:49:10.844 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:49:10.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:49:10.845 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.2076ms
2025-09-24 07:49:10.845 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:49:10.846 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.3759ms
2025-09-24 07:49:10.846 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:49:10.847 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:49:10.848 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.2427ms
2025-09-24 07:49:10.849 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:49:10.890 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:10.892 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.1033ms
2025-09-24 07:49:10.892 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:11.507 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:11.507 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:11.507 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:11.509 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:11.509 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:11.510 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:11.510 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:11.511 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:11.511 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:11.512 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:11.513 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:11.514 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:11.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:11.516 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:11.517 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:11.519 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:11.520 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:11.522 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.7111ms.
2025-09-24 07:49:11.522 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 14.0617ms
2025-09-24 07:49:11.522 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:11.522 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 15.4428ms
2025-09-24 07:49:11.547 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:49:11.548 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.1913ms
2025-09-24 07:49:11.548 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:49:11.550 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:11.551 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.1409ms
2025-09-24 07:49:11.552 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:11.553 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:49:11.553 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:11.554 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.211ms
2025-09-24 07:49:11.554 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 1.2039ms
2025-09-24 07:49:11.554 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:49:11.555 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:49:11.555 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:49:11.556 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.0828ms
2025-09-24 07:49:11.556 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.3684ms
2025-09-24 07:49:11.557 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:49:11.556 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:49:11.558 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:49:11.558 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:49:11.559 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.0181ms
2025-09-24 07:49:11.559 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:49:11.559 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.9629ms
2025-09-24 07:49:11.559 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:49:11.562 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:49:11.564 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.3182ms
2025-09-24 07:49:11.564 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:49:11.565 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:49:11.566 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.9693ms
2025-09-24 07:49:11.566 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:49:14.154 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:14.155 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:14.155 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:14.157 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:14.158 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:14.159 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:14.160 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:14.161 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:14.162 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:14.163 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:14.163 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:14.163 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:14.164 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:14.165 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:14.165 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:14.167 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:14.168 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:14.170 +07:00 [INF] Executed ViewResult - view Dashboard executed in 2.1167ms.
2025-09-24 07:49:14.170 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 14.8638ms
2025-09-24 07:49:14.170 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:14.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 16.8428ms
2025-09-24 07:49:14.193 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:49:14.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.1123ms
2025-09-24 07:49:14.194 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:49:14.196 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:49:14.197 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:49:14.197 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7096ms
2025-09-24 07:49:14.197 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:49:14.197 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:49:14.197 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:14.198 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.3996ms
2025-09-24 07:49:14.198 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.6091ms
2025-09-24 07:49:14.198 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:49:14.198 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:49:14.198 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:49:14.199 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:49:14.199 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 1.44ms
2025-09-24 07:49:14.200 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.616ms
2025-09-24 07:49:14.200 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.664ms
2025-09-24 07:49:14.200 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:49:14.200 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:49:14.202 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:49:14.203 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8309ms
2025-09-24 07:49:14.203 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:49:14.203 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:49:14.204 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.0834ms
2025-09-24 07:49:14.205 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:49:14.205 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:14.207 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.9022ms
2025-09-24 07:49:14.207 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:14.594 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:14.596 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:14.596 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:14.598 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:14.599 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:14.600 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:14.601 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:14.602 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:14.602 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:14.603 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:14.604 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:14.605 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:14.607 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:14.609 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:14.610 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:14.613 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:14.614 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:14.617 +07:00 [INF] Executed ViewResult - view Dashboard executed in 3.2447ms.
2025-09-24 07:49:14.617 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 21.188ms
2025-09-24 07:49:14.617 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:14.617 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 23.1218ms
2025-09-24 07:49:14.648 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:49:14.649 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.9263ms
2025-09-24 07:49:14.649 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:49:14.652 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:14.653 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.533ms
2025-09-24 07:49:14.653 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:49:14.653 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:49:14.654 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:49:14.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.8621ms
2025-09-24 07:49:14.654 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:49:14.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.9188ms
2025-09-24 07:49:14.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.6818ms
2025-09-24 07:49:14.654 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:49:14.654 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:49:14.655 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:49:14.655 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:49:14.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.4547ms
2025-09-24 07:49:14.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6921ms
2025-09-24 07:49:14.656 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:49:14.656 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:49:14.656 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:14.657 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.8755ms
2025-09-24 07:49:14.657 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:14.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:49:14.662 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:49:14.662 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.0325ms
2025-09-24 07:49:14.662 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:49:14.663 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.8185ms
2025-09-24 07:49:14.663 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:49:14.808 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:14.809 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:14.809 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:14.811 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:14.812 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:14.812 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:14.813 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:14.813 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:14.814 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:14.815 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:14.816 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:14.817 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:14.818 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:14.819 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:14.821 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:14.824 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:14.827 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:14.830 +07:00 [INF] Executed ViewResult - view Dashboard executed in 3.1674ms.
2025-09-24 07:49:14.830 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 21.1035ms
2025-09-24 07:49:14.830 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:14.830 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 22.4982ms
2025-09-24 07:49:14.870 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:49:14.871 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 1.4758ms
2025-09-24 07:49:14.871 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:49:14.875 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:49:14.875 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:14.876 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.6083ms
2025-09-24 07:49:14.876 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:49:14.876 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:49:14.877 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:49:14.877 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 1.0827ms
2025-09-24 07:49:14.877 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:49:14.878 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.0477ms
2025-09-24 07:49:14.878 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:49:14.878 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 1.9781ms
2025-09-24 07:49:14.878 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 3.2729ms
2025-09-24 07:49:14.878 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:49:14.879 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:49:14.878 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:49:14.880 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.0856ms
2025-09-24 07:49:14.880 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:49:14.884 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:49:14.886 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.8751ms
2025-09-24 07:49:14.886 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:49:14.888 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:49:14.889 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.0481ms
2025-09-24 07:49:14.890 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:49:14.903 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:14.904 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.9693ms
2025-09-24 07:49:14.904 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:15.018 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:15.019 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:15.019 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:15.021 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:15.022 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:15.023 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:15.023 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:15.024 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:15.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:15.026 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:15.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:15.029 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:15.031 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:15.034 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:15.036 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:15.040 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:15.041 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:15.045 +07:00 [INF] Executed ViewResult - view Dashboard executed in 3.887ms.
2025-09-24 07:49:15.045 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 25.679ms
2025-09-24 07:49:15.045 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:15.045 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 26.9363ms
2025-09-24 07:49:15.087 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:49:15.087 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.7259ms
2025-09-24 07:49:15.087 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:49:15.089 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:15.090 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.4108ms
2025-09-24 07:49:15.091 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:15.092 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:15.092 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2058ms
2025-09-24 07:49:15.092 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:49:15.093 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7043ms
2025-09-24 07:49:15.093 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:49:15.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:49:15.094 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5881ms
2025-09-24 07:49:15.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:49:15.094 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:49:15.095 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:49:15.095 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.8172ms
2025-09-24 07:49:15.096 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 1.0124ms
2025-09-24 07:49:15.096 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:49:15.096 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:49:15.096 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:49:15.097 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.346ms
2025-09-24 07:49:15.097 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:49:15.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:49:15.104 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.1574ms
2025-09-24 07:49:15.104 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:49:15.105 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:49:15.107 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.7001ms
2025-09-24 07:49:15.107 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:49:15.227 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:15.228 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:15.228 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:15.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:15.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:15.232 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:15.233 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:15.234 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:15.237 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:15.239 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:15.241 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:15.242 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:15.245 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:15.246 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:15.247 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:15.251 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:15.252 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:15.258 +07:00 [INF] Executed ViewResult - view Dashboard executed in 5.8239ms.
2025-09-24 07:49:15.258 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 29.4931ms
2025-09-24 07:49:15.258 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:15.258 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 30.7809ms
2025-09-24 07:49:15.288 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:49:15.288 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.634ms
2025-09-24 07:49:15.288 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:49:15.292 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:49:15.292 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:15.292 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2428ms
2025-09-24 07:49:15.293 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:49:15.293 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7976ms
2025-09-24 07:49:15.293 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:49:15.293 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:49:15.293 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:49:15.293 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.6021ms
2025-09-24 07:49:15.293 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.7724ms
2025-09-24 07:49:15.293 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:49:15.294 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:49:15.294 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.5865ms
2025-09-24 07:49:15.294 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:49:15.294 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:49:15.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.7195ms
2025-09-24 07:49:15.295 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:49:15.298 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:49:15.299 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:49:15.299 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.7721ms
2025-09-24 07:49:15.299 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:49:15.299 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.57ms
2025-09-24 07:49:15.300 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:49:15.316 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:15.317 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.7878ms
2025-09-24 07:49:15.317 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:17.713 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:17.714 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:17.714 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:17.715 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:17.716 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:17.716 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:17.717 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:17.717 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:17.718 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:17.719 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:17.720 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:17.722 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:17.724 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:17.726 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:17.727 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:17.729 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:17.731 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:17.732 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.7865ms.
2025-09-24 07:49:17.732 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 18.3646ms
2025-09-24 07:49:17.732 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:17.733 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 19.4142ms
2025-09-24 07:49:17.764 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:17.765 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.0644ms
2025-09-24 07:49:17.765 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:17.777 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:17.778 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2482ms
2025-09-24 07:49:21.277 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:21.278 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:21.278 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:21.279 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:21.280 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:21.280 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:21.281 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:21.281 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:21.282 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:21.282 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:21.283 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:21.283 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:21.285 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:21.287 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:21.288 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:21.290 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:21.294 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:21.316 +07:00 [INF] Executed ViewResult - view Dashboard executed in 24.6705ms.
2025-09-24 07:49:21.316 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 38.0327ms
2025-09-24 07:49:21.316 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:21.316 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 39.0798ms
2025-09-24 07:49:21.328 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:49:21.329 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:21.332 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:21.334 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:21.335 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:21.337 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:21.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:21.339 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:21.340 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:49:21.341 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:21.342 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:21.343 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:49:21.345 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:49:21.347 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:49:21.348 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:49:21.349 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:49:21.350 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:49:21.352 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.8163ms.
2025-09-24 07:49:21.352 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 19.8478ms
2025-09-24 07:49:21.352 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:49:21.352 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 23.8814ms
2025-09-24 07:49:21.389 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:49:21.393 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 3.954ms
2025-09-24 07:49:21.394 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:49:21.399 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:49:21.403 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 3.6305ms
2025-09-24 07:49:21.403 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:49:21.412 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:49:21.412 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:49:21.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2458ms
2025-09-24 07:49:21.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.3228ms
2025-09-24 07:49:21.413 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:49:21.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:49:21.784 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:49:21.788 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:49:21.790 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:49:21.791 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:49:21.792 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:49:21.794 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:49:21.796 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:49:21.797 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:49:21.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:49:21.800 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:49:21.803 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:49:21.804 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:49:21.817 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 29.1606ms
2025-09-24 07:49:21.817 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:49:21.818 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 34.7918ms
2025-09-24 07:50:19.019 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:50:19.020 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:19.020 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:19.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:19.030 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:19.032 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:19.035 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:19.037 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:19.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:50:19.041 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:19.043 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:19.046 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:50:19.051 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:50:19.056 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:50:19.059 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:50:19.061 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:50:19.063 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:50:19.071 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:50:19.071 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:19.074 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:19.075 +07:00 [INF] Executed ViewResult - view Dashboard executed in 12.9981ms.
2025-09-24 07:50:19.075 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 55.3873ms
2025-09-24 07:50:19.075 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:19.076 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 56.6082ms
2025-09-24 07:50:19.076 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:19.077 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:19.077 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:19.078 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:19.079 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:19.080 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:50:19.080 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:19.081 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:19.082 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:50:19.082 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:50:19.083 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:50:19.084 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:50:19.085 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:50:19.086 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:50:19.087 +07:00 [INF] Executed ViewResult - view Dashboard executed in 0.9175ms.
2025-09-24 07:50:19.087 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 12.3227ms
2025-09-24 07:50:19.087 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:19.087 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 16.1086ms
2025-09-24 07:50:19.111 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:50:19.112 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.7658ms
2025-09-24 07:50:19.113 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:50:19.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:19.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:50:19.118 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.4857ms
2025-09-24 07:50:19.118 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.7309ms
2025-09-24 07:50:19.118 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:50:19.118 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:19.171 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:19.171 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1269ms
2025-09-24 07:50:19.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:50:19.475 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:50:19.478 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:19.480 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:19.482 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:19.483 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:19.484 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:19.485 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:50:19.486 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:19.487 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:50:19.488 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:19.490 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:50:19.491 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:50:19.495 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 16.6277ms
2025-09-24 07:50:19.495 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:50:19.495 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 21.7036ms
2025-09-24 07:50:29.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:50:29.253 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:29.253 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:29.256 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:29.258 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:29.260 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:29.262 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:29.263 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:29.265 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:50:29.267 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:29.269 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:29.272 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:50:29.275 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:50:29.277 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:50:29.278 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:50:29.279 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:29.281 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:50:29.284 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:50:29.284 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:29.286 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:50:29.286 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:29.287 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:29.288 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:29.288 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:29.289 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:29.289 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:50:29.289 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:29.290 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:29.290 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:50:29.290 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:50:29.291 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:50:29.292 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:50:29.293 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:50:29.294 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:50:29.294 +07:00 [INF] Executed ViewResult - view Dashboard executed in 9.614ms.
2025-09-24 07:50:29.294 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 40.9024ms
2025-09-24 07:50:29.294 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:29.294 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 41.7997ms
2025-09-24 07:50:29.295 +07:00 [INF] Executed ViewResult - view Dashboard executed in 0.6664ms.
2025-09-24 07:50:29.295 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 10.3027ms
2025-09-24 07:50:29.295 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:29.295 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 16.1857ms
2025-09-24 07:50:29.313 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:50:29.315 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 2.1933ms
2025-09-24 07:50:29.315 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:50:29.316 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:29.316 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:50:29.318 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.543ms
2025-09-24 07:50:29.318 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.7525ms
2025-09-24 07:50:29.318 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:29.318 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:50:29.331 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:29.332 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1691ms
2025-09-24 07:50:29.640 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:50:29.641 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:50:29.655 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:29.657 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:29.661 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:29.662 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:29.666 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:29.671 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:50:29.673 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:29.677 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:50:29.679 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:29.682 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:50:29.683 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:50:29.687 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 31.6646ms
2025-09-24 07:50:29.687 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:50:29.687 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 47.3919ms
2025-09-24 07:50:34.564 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 07:50:34.564 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:50:34.576 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 07:50:34.581 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:34.586 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:50:34.589 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:50:34.590 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:50:34.598 +07:00 [INF] Executed ViewResult - view Index executed in 8.7392ms.
2025-09-24 07:50:34.598 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 22.0431ms
2025-09-24 07:50:34.598 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:50:34.598 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 34.0336ms
2025-09-24 07:50:34.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:50:34.631 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.7072ms
2025-09-24 07:50:34.631 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:50:34.634 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:34.634 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.6198ms
2025-09-24 07:50:34.634 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:34.638 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:50:34.638 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:34.639 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3494ms
2025-09-24 07:50:34.639 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.8966ms
2025-09-24 07:50:34.639 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:50:34.640 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:50:34.641 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:50:34.641 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.7765ms
2025-09-24 07:50:34.641 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.6746ms
2025-09-24 07:50:34.641 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:50:34.641 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:50:34.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:50:34.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:50:34.643 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.9841ms
2025-09-24 07:50:34.643 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.6357ms
2025-09-24 07:50:34.643 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:50:34.643 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:50:34.647 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:50:34.648 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.9881ms
2025-09-24 07:50:34.648 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:50:34.649 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:50:34.649 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:50:34.649 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.7548ms
2025-09-24 07:50:34.650 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:50:34.650 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 1.0367ms
2025-09-24 07:50:34.650 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:50:35.921 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 07:50:35.922 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:50:35.922 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 07:50:35.926 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:35.932 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:50:35.937 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:50:35.937 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:50:35.940 +07:00 [INF] Executed ViewResult - view Index executed in 3.4238ms.
2025-09-24 07:50:35.941 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 18.7301ms
2025-09-24 07:50:35.941 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:50:35.941 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 20.0466ms
2025-09-24 07:50:35.965 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:50:35.966 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.5725ms
2025-09-24 07:50:35.966 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:50:35.969 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:35.970 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.0361ms
2025-09-24 07:50:35.970 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:35.971 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:35.971 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2027ms
2025-09-24 07:50:35.972 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:50:35.973 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.7781ms
2025-09-24 07:50:35.973 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:50:35.973 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:50:35.974 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:50:35.974 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:50:35.974 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5334ms
2025-09-24 07:50:35.974 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.6407ms
2025-09-24 07:50:35.974 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:50:35.974 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:50:35.974 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:50:35.974 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.7162ms
2025-09-24 07:50:35.975 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:50:35.975 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.8075ms
2025-09-24 07:50:35.975 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:50:35.979 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:50:35.980 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 1.1061ms
2025-09-24 07:50:35.980 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:50:35.981 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:50:35.981 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:50:35.982 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 0.8036ms
2025-09-24 07:50:35.982 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:50:35.982 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.8144ms
2025-09-24 07:50:35.982 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:50:36.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 07:50:36.348 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:50:36.348 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 07:50:36.350 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:36.352 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:50:36.353 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:50:36.354 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:50:36.357 +07:00 [INF] Executed ViewResult - view Index executed in 2.8782ms.
2025-09-24 07:50:36.357 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 8.7245ms
2025-09-24 07:50:36.357 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:50:36.358 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 9.9849ms
2025-09-24 07:50:36.382 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:50:36.383 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 0.6416ms
2025-09-24 07:50:36.383 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:50:36.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:36.386 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1695ms
2025-09-24 07:50:36.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:50:36.386 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.5622ms
2025-09-24 07:50:36.386 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:50:36.387 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:50:36.387 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:50:36.387 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.4831ms
2025-09-24 07:50:36.387 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:50:36.388 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.5261ms
2025-09-24 07:50:36.388 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:50:36.388 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:50:36.388 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.7925ms
2025-09-24 07:50:36.389 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:50:36.390 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:50:36.391 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.8303ms
2025-09-24 07:50:36.391 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:50:36.393 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:50:36.393 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:50:36.394 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.9194ms
2025-09-24 07:50:36.394 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:50:36.394 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:50:36.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 2.2296ms
2025-09-24 07:50:36.395 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.952ms
2025-09-24 07:50:36.396 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:50:36.396 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:50:36.424 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:36.425 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.8483ms
2025-09-24 07:50:36.425 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:37.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:50:37.117 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:37.117 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:37.120 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:37.123 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:37.125 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:37.127 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:37.130 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:37.132 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:50:37.133 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:37.174 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:37.176 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:50:37.180 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:50:37.181 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:50:37.184 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:50:37.186 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:50:37.187 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:50:37.188 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.1025ms.
2025-09-24 07:50:37.188 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 71.2147ms
2025-09-24 07:50:37.188 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:37.188 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 72.21ms
2025-09-24 07:50:37.219 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:37.220 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.0815ms
2025-09-24 07:50:37.220 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:37.230 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:37.230 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2054ms
2025-09-24 07:50:38.962 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books?area=Admin - null null
2025-09-24 07:50:38.963 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:50:38.963 +07:00 [INF] Route matched with {action = "Index", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(BookStoreMVC.Models.ViewModels.BookListViewModel) on controller BookStoreMVC.Controllers.BooksController (BookStoreMVC).
2025-09-24 07:50:38.967 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:38.984 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:50:38.998 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:50:38.998 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:50:39.007 +07:00 [INF] Executed ViewResult - view Index executed in 8.9562ms.
2025-09-24 07:50:39.007 +07:00 [INF] Executed action BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC) in 44.7109ms
2025-09-24 07:50:39.008 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.BooksController.Index (BookStoreMVC)'
2025-09-24 07:50:39.008 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books?area=Admin - 200 null text/html; charset=utf-8 45.9132ms
2025-09-24 07:50:39.048 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:50:39.049 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 1.2514ms
2025-09-24 07:50:39.050 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:39.050 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:50:39.051 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.346ms
2025-09-24 07:50:39.051 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:39.054 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:39.055 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.199ms
2025-09-24 07:50:39.055 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:50:39.056 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 0.602ms
2025-09-24 07:50:39.056 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:50:39.056 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:50:39.056 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:50:39.056 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:50:39.056 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 0.595ms
2025-09-24 07:50:39.056 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 0.3591ms
2025-09-24 07:50:39.056 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:50:39.056 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:50:39.056 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:50:39.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 0.5036ms
2025-09-24 07:50:39.057 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:50:39.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 0.3151ms
2025-09-24 07:50:39.057 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:50:39.059 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:50:39.060 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:50:39.060 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:50:39.060 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 0.5055ms
2025-09-24 07:50:39.060 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:50:39.060 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 0.8708ms
2025-09-24 07:50:39.060 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:50:39.061 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 1.0205ms
2025-09-24 07:50:39.061 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:50:40.177 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:50:40.178 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:40.178 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:40.180 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:40.182 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:40.183 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:40.185 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:40.186 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:40.187 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:50:40.188 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:40.190 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:40.193 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:50:40.196 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:50:40.197 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:50:40.199 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:50:40.202 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:50:40.203 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:50:40.204 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.797ms.
2025-09-24 07:50:40.205 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 26.7276ms
2025-09-24 07:50:40.205 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:40.205 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 28.4629ms
2025-09-24 07:50:40.233 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:40.234 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.856ms
2025-09-24 07:50:40.234 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:40.239 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:40.240 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2278ms
2025-09-24 07:50:54.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:50:54.348 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:54.348 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:54.350 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:54.354 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:54.357 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:54.363 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:54.367 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:54.371 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:50:54.374 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:54.378 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:54.386 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:50:54.387 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:50:54.388 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:54.393 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:54.398 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:50:54.405 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:50:54.415 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:54.419 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:50:54.420 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:54.421 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:50:54.424 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:50:54.426 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:54.429 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:54.431 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:54.434 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:50:54.436 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:54.436 +07:00 [INF] Executed ViewResult - view Dashboard executed in 14.1064ms.
2025-09-24 07:50:54.437 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 88.2597ms
2025-09-24 07:50:54.437 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:54.437 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 89.1901ms
2025-09-24 07:50:54.440 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:54.443 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:50:54.444 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:50:54.446 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:50:54.447 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:50:54.448 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:50:54.449 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:50:54.451 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9228ms.
2025-09-24 07:50:54.451 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 57.6112ms
2025-09-24 07:50:54.451 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:50:54.451 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 63.7907ms
2025-09-24 07:50:54.478 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:50:54.480 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.7243ms
2025-09-24 07:50:54.480 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:50:54.484 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - null null
2025-09-24 07:50:54.485 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:50:54.486 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 2.0235ms
2025-09-24 07:50:54.486 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.0892ms
2025-09-24 07:50:54.486 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:50:54.486 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-09-24 07:50:54.492 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:50:54.492 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2735ms
2025-09-24 07:50:54.630 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:50:54.631 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:50:54.635 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:50:54.638 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:50:54.641 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:50:54.644 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:50:54.647 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:50:54.650 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:50:54.657 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:50:54.660 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:50:54.664 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:50:54.667 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:50:54.667 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:50:54.672 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 36.8372ms
2025-09-24 07:50:54.672 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:50:54.672 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 42.1648ms
2025-09-24 07:51:00.956 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:51:00.957 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 1.1179ms
2025-09-24 07:51:00.957 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:51:02.059 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:51:02.062 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 2.1881ms
2025-09-24 07:51:02.062 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:51:02.391 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:51:02.392 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 0.412ms
2025-09-24 07:51:02.392 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:55:23.800 +07:00 [INF] User profile is available. Using 'C:\Users\admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-24 07:55:24.514 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:55:24.523 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 07:55:24.544 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 07:55:24.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 07:55:24.606 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:55:24.607 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 07:55:24.612 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 07:55:24.619 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 07:55:24.622 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 07:55:24.800 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:55:24.838 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:55:24.850 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:55:24.891 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:55:24.896 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:55:24.898 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:55:24.899 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:55:24.900 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:55:24.902 +07:00 [INF] Database initialization completed successfully.
2025-09-24 07:55:25.006 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:55:25.006 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-24 07:55:25.007 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-24 07:55:25.010 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-24 07:55:25.012 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-24 07:55:25.013 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-24 07:55:25.014 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-24 07:55:25.015 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-09-24 07:55:25.016 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-24 07:55:25.020 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:55:25.023 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-09-24 07:55:25.028 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:55:25.031 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:55:25.033 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Books] AS [b]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-24 07:55:25.036 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:55:25.039 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:55:25.043 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-09-24 07:55:25.043 +07:00 [INF] Database initialization completed successfully.
2025-09-24 07:55:25.044 +07:00 [INF] BookStore application starting up...
2025-09-24 07:55:25.096 +07:00 [INF] Now listening on: http://localhost:5232
2025-09-24 07:55:25.096 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-24 07:55:25.096 +07:00 [INF] Hosting environment: Development
2025-09-24 07:55:25.096 +07:00 [INF] Content root path: E:\BookMwc\BookStoreMWC
2025-09-24 07:55:26.909 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 07:55:26.914 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-24 07:55:26.961 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:55:27.065 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 07:55:27.275 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:55:27.373 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:55:27.480 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 07:55:27.507 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 07:55:27.523 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:55:27.535 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:55:27.552 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:55:27.564 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:55:27.594 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:55:27.616 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-24 07:55:27.689 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 07:55:27.707 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:55:27.735 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:55:27.778 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:55:27.957 +07:00 [INF] Executed ViewResult - view Index executed in 182.873ms.
2025-09-24 07:55:27.960 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 894.4243ms
2025-09-24 07:55:27.960 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:55:27.968 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 1060.7009ms
2025-09-24 07:55:27.972 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - null null
2025-09-24 07:55:27.972 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - null null
2025-09-24 07:55:27.978 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - null null
2025-09-24 07:55:27.978 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - null null
2025-09-24 07:55:27.979 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - null null
2025-09-24 07:55:27.980 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - null null
2025-09-24 07:55:27.981 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/dmca-protected.png - 404 0 null 8.915ms
2025-09-24 07:55:27.981 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/no-book-cover.png - 404 0 null 8.92ms
2025-09-24 07:55:27.982 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/no-book-cover.png, Response status code: 404
2025-09-24 07:55:27.982 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/dmca-protected.png, Response status code: 404
2025-09-24 07:55:27.985 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:55:27.985 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - null null
2025-09-24 07:55:27.988 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 3.0235ms
2025-09-24 07:55:27.991 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - null null
2025-09-24 07:55:27.998 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/trusted-shop.png - 404 0 null 19.7687ms
2025-09-24 07:55:27.998 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/zalopay.png - 404 0 null 7.3779ms
2025-09-24 07:55:27.998 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/mastercard.png - 404 0 null 18.1269ms
2025-09-24 07:55:27.999 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/mastercard.png, Response status code: 404
2025-09-24 07:55:27.999 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/trusted-shop.png, Response status code: 404
2025-09-24 07:55:27.998 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/ssl-secured.png - 404 0 null 20.0071ms
2025-09-24 07:55:27.998 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/visa.png - 404 0 null 19.2043ms
2025-09-24 07:55:27.998 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/momo.png - 404 0 null 13.051ms
2025-09-24 07:55:27.999 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/zalopay.png, Response status code: 404
2025-09-24 07:55:27.999 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/visa.png, Response status code: 404
2025-09-24 07:55:27.999 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/ssl-secured.png, Response status code: 404
2025-09-24 07:55:27.999 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/momo.png, Response status code: 404
2025-09-24 07:55:28.003 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - null null
2025-09-24 07:55:28.006 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/payment/vnpay.png - 404 0 null 3.2099ms
2025-09-24 07:55:28.006 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/payment/vnpay.png, Response status code: 404
2025-09-24 07:55:38.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/ - null null
2025-09-24 07:55:38.742 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:55:38.742 +07:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller BookStoreMVC.Controllers.HomeController (BookStoreMVC).
2025-09-24 07:55:38.753 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r2].[Id], [r2].[BookId], [r2].[Comment], [r2].[CreatedAt], [r2].[IsApproved], [r2].[IsVerifiedPurchase], [r2].[Rating], [r2].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) AS [c], CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END AS [c0]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COUNT(*)
        FROM [Reviews] AS [r]
        WHERE [b].[Id] = [r].[BookId]) DESC, CASE
        WHEN EXISTS (
            SELECT 1
            FROM [Reviews] AS [r0]
            WHERE [b].[Id] = [r0].[BookId]) THEN (
            SELECT AVG(CAST([r1].[Rating] AS float))
            FROM [Reviews] AS [r1]
            WHERE [b].[Id] = [r1].[BookId])
        ELSE 0.0E0
    END DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r2] ON [b0].[Id] = [r2].[BookId]
ORDER BY [b0].[c] DESC, [b0].[c0] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:55:38.759 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY [b].[CreatedAt] DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[CreatedAt] DESC, [b0].[Id], [c].[Id]
2025-09-24 07:55:38.767 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId], [o0].[Id], [o0].[BookId], [o0].[OrderId], [o0].[Quantity], [o0].[Total], [o0].[UnitPrice]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) AS [c]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] > 0
    ORDER BY (
        SELECT COALESCE(SUM([o].[Quantity]), 0)
        FROM [OrderItems] AS [o]
        WHERE [b].[Id] = [o].[BookId]) DESC
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
LEFT JOIN [OrderItems] AS [o0] ON [b0].[Id] = [o0].[BookId]
ORDER BY [b0].[c] DESC, [b0].[Id], [c].[Id], [r].[Id]
2025-09-24 07:55:38.769 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:55:38.772 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:55:38.774 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:55:38.775 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:55:38.781 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[BookId], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [r0].[IsVerifiedPurchase], [r0].[Rating], [r0].[UserId], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    WHERE [r].[IsApproved] = CAST(1 AS bit)
    ORDER BY [r].[CreatedAt] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
INNER JOIN [Categories] AS [c] ON [b].[CategoryId] = [c].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:55:38.785 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [c0].[Id], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt], [c0].[CreatedAt], [c0].[Description], [c0].[ImageUrl], [c0].[IsActive], [c0].[Name], [c0].[ParentCategoryId], [c1].[Id], [c1].[CreatedAt], [c1].[Description], [c1].[ImageUrl], [c1].[IsActive], [c1].[Name], [c1].[ParentCategoryId]
FROM [Categories] AS [c]
LEFT JOIN [Categories] AS [c0] ON [c].[ParentCategoryId] = [c0].[Id]
LEFT JOIN [Books] AS [b] ON [c].[Id] = [b].[CategoryId]
LEFT JOIN [Categories] AS [c1] ON [c].[Id] = [c1].[ParentCategoryId]
ORDER BY [c].[Name], [c].[Id], [c0].[Id], [b].[Id]
2025-09-24 07:55:38.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:55:38.792 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Author], [b0].[CategoryId], [b0].[CreatedAt], [b0].[Description], [b0].[DiscountPrice], [b0].[ImageContentType], [b0].[ImageFileName], [b0].[ImageFileSize], [b0].[ImageUrl], [b0].[IsActive], [b0].[Language], [b0].[PageCount], [b0].[Price], [b0].[PublishDate], [b0].[Publisher], [b0].[StockQuantity], [b0].[Title], [b0].[UpdatedAt], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId], [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[IsVerifiedPurchase], [r].[Rating], [r].[UserId]
FROM (
    SELECT [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit)
    ORDER BY [b].[Title]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
LEFT JOIN [Reviews] AS [r] ON [b0].[Id] = [r].[BookId]
ORDER BY [b0].[Title], [b0].[Id], [c].[Id]
2025-09-24 07:55:38.794 +07:00 [INF] Executing ViewResult, running view Index.
2025-09-24 07:55:38.804 +07:00 [INF] Executed ViewResult - view Index executed in 10.3417ms.
2025-09-24 07:55:38.805 +07:00 [INF] Executed action BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC) in 62.4569ms
2025-09-24 07:55:38.805 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.HomeController.Index (BookStoreMVC)'
2025-09-24 07:55:38.805 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/ - 200 null text/html; charset=utf-8 65.2095ms
2025-09-24 07:55:38.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:55:38.827 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.376ms
2025-09-24 07:55:43.018 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:55:43.021 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:55:43.027 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:55:43.146 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:55:43.152 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:55:43.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:55:43.160 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:55:43.162 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:55:43.166 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:55:43.172 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:55:43.177 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:55:43.195 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:55:43.208 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:55:43.216 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:55:43.220 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-09-24 07:55:43.227 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:55:43.252 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 07:55:43.286 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:55:43.384 +07:00 [INF] Executed ViewResult - view Dashboard executed in 98.9957ms.
2025-09-24 07:55:43.384 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 357.2639ms
2025-09-24 07:55:43.384 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:55:43.384 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 366.6818ms
2025-09-24 07:55:43.404 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:55:43.406 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.2856ms
2025-09-24 07:55:43.406 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:55:43.416 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:55:43.416 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:55:43.416 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.293ms
2025-09-24 07:55:43.417 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.3864ms
2025-09-24 07:55:43.419 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:55:43.551 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:55:43.554 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:55:43.558 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:55:43.564 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:55:43.568 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:55:43.571 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:55:43.586 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:55:43.610 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:55:43.614 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:55:43.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:55:43.621 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:55:43.632 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:55:43.634 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:55:43.656 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 97.5247ms
2025-09-24 07:55:43.656 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:55:43.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 105.0361ms
2025-09-24 07:55:46.581 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:55:46.582 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 0.8906ms
2025-09-24 07:55:46.582 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:57:05.646 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:57:05.651 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:05.651 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:05.664 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:05.670 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:05.675 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:05.680 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:05.684 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:05.689 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:57:05.697 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:05.701 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:05.713 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:57:05.731 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:57:05.740 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:57:05.754 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:57:05.770 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months) in E:\BookMwc\BookStoreMWC\Services\OrderService.cs:line 280
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync() in E:\BookMwc\BookStoreMWC\Services\DashboardService.cs:line 105
   at BookStoreMVC.Controllers.AdminController.Dashboard() in E:\BookMwc\BookStoreMWC\Controllers\AdminController.cs:line 48
2025-09-24 07:57:05.775 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:57:05.783 +07:00 [INF] Executed ViewResult - view Dashboard executed in 7.9891ms.
2025-09-24 07:57:05.783 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 132.1322ms
2025-09-24 07:57:05.784 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:05.784 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 137.5081ms
2025-09-24 07:57:05.848 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:57:05.848 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.5884ms
2025-09-24 07:57:07.824 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:57:07.825 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:07.825 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:07.829 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:07.901 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:07.903 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:07.905 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:07.907 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:07.910 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:57:07.914 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:07.918 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:07.921 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:57:07.926 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:57:07.931 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:57:07.935 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:57:07.941 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:57:07.942 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:57:07.949 +07:00 [INF] Executed ViewResult - view Dashboard executed in 6.635ms.
2025-09-24 07:57:07.949 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 124.0719ms
2025-09-24 07:57:07.950 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:07.951 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 126.4937ms
2025-09-24 07:57:07.995 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:57:07.995 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:57:07.996 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.8247ms
2025-09-24 07:57:07.997 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.8167ms
2025-09-24 07:57:07.997 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:57:07.998 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:57:08.000 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.9203ms
2025-09-24 07:57:08.000 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:57:08.094 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:57:08.097 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:57:08.097 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:08.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:08.101 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:08.103 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:08.107 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:08.111 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:57:08.114 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:08.116 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:57:08.118 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:08.123 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:57:08.124 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:57:08.125 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 27.6435ms
2025-09-24 07:57:08.125 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:57:08.126 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 31.3077ms
2025-09-24 07:57:12.012 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - null null
2025-09-24 07:57:12.012 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Books/Create?area=Admin - 404 0 null 0.9065ms
2025-09-24 07:57:12.013 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/Books/Create, Response status code: 404
2025-09-24 07:57:13.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:57:13.643 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:13.647 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:13.650 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:13.652 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:13.653 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:13.655 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:13.656 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:13.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:57:13.659 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:13.661 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:13.664 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:57:13.667 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:57:13.669 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:57:13.672 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:57:13.674 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:57:13.677 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:57:13.732 +07:00 [INF] Executed ViewResult - view Dashboard executed in 55.9759ms.
2025-09-24 07:57:13.732 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 84.8395ms
2025-09-24 07:57:13.732 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:13.732 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 90.0728ms
2025-09-24 07:57:13.764 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:57:13.765 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2455ms
2025-09-24 07:57:14.809 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:57:14.810 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:14.810 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:14.812 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:14.813 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:14.815 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:14.818 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:14.820 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:14.821 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:57:14.823 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:14.824 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:14.827 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:57:14.830 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:57:14.832 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:57:14.835 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:57:14.837 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:57:14.838 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:57:14.839 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.9434ms.
2025-09-24 07:57:14.840 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 29.7105ms
2025-09-24 07:57:14.840 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:14.840 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 30.6664ms
2025-09-24 07:57:14.857 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:57:14.858 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.513ms
2025-09-24 07:57:14.858 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:57:14.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:57:14.861 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.8824ms
2025-09-24 07:57:14.861 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:57:14.865 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:57:14.866 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.3231ms
2025-09-24 07:57:14.932 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:57:14.933 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:57:14.937 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:14.938 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:14.939 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:14.940 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:14.942 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:14.943 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:57:14.947 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:14.950 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:57:14.956 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:14.960 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:57:14.960 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:57:14.970 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 33.3714ms
2025-09-24 07:57:14.971 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:57:14.971 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 38.6638ms
2025-09-24 07:57:16.213 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:57:16.214 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:16.214 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:16.215 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:16.217 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:16.217 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:16.219 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:16.220 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:16.221 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:57:16.222 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:16.223 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:16.225 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:57:16.228 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:57:16.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:57:16.233 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:57:16.234 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:57:16.234 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:57:16.235 +07:00 [INF] Executed ViewResult - view Dashboard executed in 1.0308ms.
2025-09-24 07:57:16.235 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 21.3285ms
2025-09-24 07:57:16.235 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:16.236 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 22.5952ms
2025-09-24 07:57:16.251 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:57:16.252 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 1.252ms
2025-09-24 07:57:16.252 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:57:16.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:57:16.252 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:57:16.252 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.2383ms
2025-09-24 07:57:16.254 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 2.1043ms
2025-09-24 07:57:16.255 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:57:16.311 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:57:16.313 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:57:16.313 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:16.314 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:16.314 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:16.315 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:16.316 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:16.317 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:57:16.318 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:16.319 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:57:16.319 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:16.321 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:57:16.321 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:57:16.321 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 8.0461ms
2025-09-24 07:57:16.321 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:57:16.321 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 9.9354ms
2025-09-24 07:57:30.831 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:57:30.832 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:30.832 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:30.843 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:30.846 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:30.848 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:30.851 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:30.853 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:30.856 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:57:30.858 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:30.860 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:30.863 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:57:30.867 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:57:30.869 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:57:30.872 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:57:30.873 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:57:30.875 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:57:30.898 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin - null null
2025-09-24 07:57:30.899 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:30.902 +07:00 [INF] Route matched with {action = "Dashboard", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Dashboard() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:30.904 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:30.905 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:30.906 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:30.907 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:30.908 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[Status], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:30.909 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
WHERE [o].[Status] = 0
2025-09-24 07:57:30.910 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:30.911 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:30.912 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[UserId], [o0].[Status], [o0].[Total], [o0].[CreatedAt], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM (
    SELECT TOP(@__p_0) [o].[Id], [o].[CreatedAt], [o].[Status], [o].[Total], [o].[UserId]
    FROM [Orders] AS [o]
    ORDER BY [o].[CreatedAt] DESC
) AS [o0]
INNER JOIN [AspNetUsers] AS [a] ON [o0].[UserId] = [a].[Id]
ORDER BY [o0].[CreatedAt] DESC
2025-09-24 07:57:30.914 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r0].[Id], [r0].[Rating], [r0].[Comment], [r0].[CreatedAt], [r0].[IsApproved], [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b].[Id], [b].[Author], [b].[CategoryId], [b].[CreatedAt], [b].[Description], [b].[DiscountPrice], [b].[ImageContentType], [b].[ImageFileName], [b].[ImageFileSize], [b].[ImageUrl], [b].[IsActive], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublishDate], [b].[Publisher], [b].[StockQuantity], [b].[Title], [b].[UpdatedAt]
FROM (
    SELECT TOP(@__p_0) [r].[Id], [r].[BookId], [r].[Comment], [r].[CreatedAt], [r].[IsApproved], [r].[Rating], [r].[UserId]
    FROM [Reviews] AS [r]
    ORDER BY [r].[CreatedAt] DESC
) AS [r0]
INNER JOIN [AspNetUsers] AS [a] ON [r0].[UserId] = [a].[Id]
INNER JOIN [Books] AS [b] ON [r0].[BookId] = [b].[Id]
ORDER BY [r0].[CreatedAt] DESC
2025-09-24 07:57:30.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Name], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
ORDER BY [a].[CreatedAt] DESC
2025-09-24 07:57:30.917 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b0].[Id], [b0].[Title], [b0].[Author], [b0].[StockQuantity], [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM (
    SELECT TOP(@__p_0) [b].[Id], [b].[Author], [b].[CategoryId], [b].[StockQuantity], [b].[Title]
    FROM [Books] AS [b]
    WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
) AS [b0]
INNER JOIN [Categories] AS [c] ON [b0].[CategoryId] = [c].[Id]
2025-09-24 07:57:30.919 +07:00 [ERR] Error loading admin dashboard
System.InvalidOperationException: The LINQ expression 'DbSet<Order>()
    .Where(o => (int)o.Status == 3 && o.CreatedAt >= __startDate_0)
    .GroupBy(o => new { 
        Year = o.CreatedAt.Year, 
        Month = o.CreatedAt.Month
     })
    .Select(g => new { 
        Date = new DateTime(
            g.Key.Year, 
            g.Key.Month, 
            1
        ), 
        Revenue = g
            .AsQueryable()
            .Sum(e => e.Total)
     })
    .OrderBy(e0 => e0.Date)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToDictionaryAsync[TSource,TKey,TElement](IQueryable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer, CancellationToken cancellationToken)
   at BookStoreMVC.Services.OrderService.GetMonthlyRevenueAsync(Int32 months)
   at BookStoreMVC.Services.DashboardService.GetAdminDashboardAsync()
   at BookStoreMVC.Controllers.AdminController.Dashboard()
2025-09-24 07:57:30.920 +07:00 [INF] Executing ViewResult, running view Dashboard.
2025-09-24 07:57:30.952 +07:00 [INF] Executed ViewResult - view Dashboard executed in 78.0775ms.
2025-09-24 07:57:30.952 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 120.3869ms
2025-09-24 07:57:30.952 +07:00 [INF] Executed ViewResult - view Dashboard executed in 32.7449ms.
2025-09-24 07:57:30.953 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:30.953 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC) in 50.3671ms
2025-09-24 07:57:30.953 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.Dashboard (BookStoreMVC)'
2025-09-24 07:57:30.953 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 122.2202ms
2025-09-24 07:57:30.953 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin - 200 null text/html; charset=utf-8 54.9375ms
2025-09-24 07:57:30.995 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/images/logo.png - null null
2025-09-24 07:57:30.997 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:57:30.997 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/js/admin.js - null null
2025-09-24 07:57:30.997 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.272ms
2025-09-24 07:57:30.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/images/logo.png - 404 0 null 3.4854ms
2025-09-24 07:57:30.999 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/js/admin.js - 404 0 null 1.9905ms
2025-09-24 07:57:30.999 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/js/admin.js, Response status code: 404
2025-09-24 07:57:30.999 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5232/images/logo.png, Response status code: 404
2025-09-24 07:57:31.127 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - null null
2025-09-24 07:57:31.129 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:57:31.131 +07:00 [INF] Route matched with {action = "GetDashboardStats", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardStats() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:31.132 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [AspNetUsers] AS [a]
2025-09-24 07:57:31.133 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit)
2025-09-24 07:57:31.134 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Orders] AS [o]
2025-09-24 07:57:31.136 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(SUM([o].[Total]), 0.0)
FROM [Orders] AS [o]
WHERE [o].[Status] = 3
2025-09-24 07:57:31.137 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Status], [o].[Id], [o].[CreatedAt], [o].[Discount], [o].[PaymentId], [o].[ShippingInfoId], [o].[SubTotal], [o].[Tax], [o].[Total], [o].[UserId]
FROM [Orders] AS [o]
ORDER BY [o].[Status]
2025-09-24 07:57:31.139 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
WHERE [b].[IsActive] = CAST(1 AS bit) AND [b].[StockQuantity] <= 10
2025-09-24 07:57:31.141 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
2025-09-24 07:57:31.142 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(0 AS bit)
2025-09-24 07:57:31.152 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([r].[Rating] AS float))
FROM [Reviews] AS [r]
WHERE [r].[IsApproved] = CAST(1 AS bit)
2025-09-24 07:57:31.152 +07:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-24 07:57:31.157 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC) in 26.0538ms
2025-09-24 07:57:31.158 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.GetDashboardStats (BookStoreMVC)'
2025-09-24 07:57:31.158 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/admin/dashboard/stats - 200 null application/json; charset=utf-8 30.5169ms
2025-09-24 07:57:34.195 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/Admin/Books/Create - null null
2025-09-24 07:57:34.196 +07:00 [INF] Executing endpoint 'BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC)'
2025-09-24 07:57:34.199 +07:00 [INF] Route matched with {action = "CreateBook", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook() on controller BookStoreMVC.Controllers.AdminController (BookStoreMVC).
2025-09-24 07:57:34.293 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[ImageUrl], [c].[IsActive], [c].[Name], [c].[ParentCategoryId]
FROM [Categories] AS [c]
WHERE [c].[IsActive] = CAST(1 AS bit)
ORDER BY [c].[Name]
2025-09-24 07:57:34.296 +07:00 [INF] Executing ViewResult, running view CreateBook.
2025-09-24 07:57:34.298 +07:00 [ERR] The view 'CreateBook' was not found. Searched locations: ["/Views/Admin/CreateBook.cshtml","/Views/Shared/CreateBook.cshtml"]
2025-09-24 07:57:34.301 +07:00 [INF] Executed action BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC) in 102.0917ms
2025-09-24 07:57:34.302 +07:00 [INF] Executed endpoint 'BookStoreMVC.Controllers.AdminController.CreateBook (BookStoreMVC)'
2025-09-24 07:57:34.302 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'CreateBook' was not found. The following locations were searched:
/Views/Admin/CreateBook.cshtml
/Views/Shared/CreateBook.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-24 07:57:34.317 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/Admin/Books/Create - 500 null text/html; charset=utf-8 122.3573ms
2025-09-24 07:57:34.343 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - null null
2025-09-24 07:57:34.343 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/_framework/aspnetcore-browser-refresh.js - 200 16459 application/javascript; charset=utf-8 0.1938ms
